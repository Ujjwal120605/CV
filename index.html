<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujjwal Bajpai - Software Engineer</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f0f0f;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Particles.js Container */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            background-color: transparent;
            background-image: url('');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 50% 50%;
            z-index: -1;
            pointer-events: none;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            z-index: 1000;
            border-bottom: 1px solid #333;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00bcd4;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #00bcd4;
        }

        /* Mobile Navigation Menu */
        .mobile-menu {
            display: none;
            cursor: pointer;
            color: #00bcd4;
            font-size: 1.5rem;
        }

        .mobile-nav {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            background: rgba(15, 15, 15, 0.98);
            backdrop-filter: blur(10px);
            z-index: 999;
            padding: 1rem 0;
        }

        .mobile-nav.active {
            display: block;
        }

        .mobile-nav ul {
            list-style: none;
            text-align: center;
        }

        .mobile-nav ul li {
            padding: 1rem 0;
            border-bottom: 1px solid #333;
        }

        .mobile-nav ul li:last-child {
            border-bottom: none;
        }

        .mobile-nav ul li a {
            color: #ccc;
            text-decoration: none;
            font-size: 1.1rem;
            transition: color 0.3s;
        }

        .mobile-nav ul li a:hover {
            color: #00bcd4;
        }
        /* Location Widget Styles */
.location-widget {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    border-radius: 20px;
    padding: 2rem;
    margin: 2rem 0;
    border: 1px solid rgba(0, 188, 212, 0.2);
    backdrop-filter: blur(20px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.location-header {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 2rem;
}

.location-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: #aaa;
}

.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #4caf50;
    animation: pulse 2s infinite;
}

.status-dot.inactive {
    background: #666;
    animation: none;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.location-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.location-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 15px;
    padding: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: transform 0.3s ease;
}

.location-card:hover {
    transform: translateY(-3px);
}

.location-card h3 {
    color: #00bcd4;
    margin: 0 0 1rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.2rem;
}

.location-details {
    color: #ddd;
    line-height: 1.6;
}

.location-details p {
    margin: 0.5rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.location-details i {
    width: 16px;
    color: #00bcd4;
}

.current-location-card {
    border: 1px solid rgba(0, 188, 212, 0.3);
    background: rgba(0, 188, 212, 0.1);
}

.map-container {
    grid-column: 1 / -1;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    min-height: 300px;
    position: relative;
}

.map-container iframe {
    width: 100%;
    height: 300px;
    border: none;
}

.map-overlay {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    backdrop-filter: blur(10px);
}

.location-controls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
}

.location-btn {
    padding: 0.8rem 1.5rem;
    border: 1px solid rgba(0, 188, 212, 0.3);
    background: rgba(0, 188, 212, 0.1);
    color: #00bcd4;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: inherit;
}

.location-btn:hover:not(:disabled) {
    background: rgba(0, 188, 212, 0.2);
    transform: translateY(-2px);
}

.location-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.location-btn.danger {
    border-color: rgba(255, 107, 107, 0.3);
    background: rgba(255, 107, 107, 0.1);
    color: #ff6b6b;
}

.location-btn.danger:hover:not(:disabled) {
    background: rgba(255, 107, 107, 0.2);
}

.privacy-warning {
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.3);
    border-radius: 10px;
    padding: 1rem;
    color: #ffb74d;
    font-size: 0.9rem;
    display: flex;
    align-items: start;
    gap: 0.5rem;
    margin-top: 1rem;
}

.privacy-warning i {
    flex-shrink: 0;
    margin-top: 0.2rem;
}

.loading-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(0, 188, 212, 0.3);
    border-radius: 50%;
    border-top-color: #00bcd4;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .location-content {
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    .location-controls {
        flex-direction: column;
    }

    .location-btn {
        justify-content: center;
    }
}

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 0 1rem;
            background: rgba(15, 15, 15, 0.5);
            position: relative;
            z-index: 1;
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .gradient-text {
            background: linear-gradient(45deg, #00bcd4, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-text p {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 2rem;
        }

        .buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-align: center;
            justify-content: center;
            min-width: 120px;
        }

        .btn-primary {
            background: #00bcd4;
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: #00bcd4;
            border: 2px solid #00bcd4;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .hero-image {
            text-align: center;
        }

        .profile-pic {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #00bcd4;
            max-width: 100%;
        }
        /* Animated Projects Section */
/* Enhanced Animated Projects Section */
/* Enhanced Animated Projects Section */
/* Enhanced Animated Projects Section */
/* Enhanced Animated Projects Section with Stack Cards for Mobile */
.projects-showcase {
    display: flex;
    gap: 1rem;
    height: 700px;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 1rem 0;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.02);
}

/* Desktop cards - keep existing */
/* Enhanced Animated Projects Section with Stack Cards for Mobile */
/* Enhanced Animated Projects Section */
.projects-showcase {
    display: flex;
    gap: 1rem;
    height: 700px;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 1rem 0;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.02);
}

/* Desktop Layout - Keep existing functionality */
.animated-project-card {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 200px;
    height: 700px;
    border-radius: 24px;
    cursor: pointer;
    transition: all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    scroll-snap-align: start;
    overflow: hidden;
    flex-shrink: 0;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.animated-project-card.active {
    min-width: 500px;
    flex: 3.5;
}

.animated-project-card:not(.active) {
    min-width: 200px;
    flex: 0.8;
}

.animated-project-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 188, 212, 0.2);
}

.project-background {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 24px;
    filter: brightness(0.7);
    transition: filter 0.3s ease;
    z-index: 0;
}

.animated-project-card:hover .project-background {
    filter: brightness(0.9);
}

.animated-project-card.active .project-background {
    filter: brightness(0.8);
}

.project-title-vertical {
    position: absolute;
    bottom: 3rem;
    left: 50%;
    transform: translateX(-50%) rotate(-90deg);
    transform-origin: center;
    font-size: 1.4rem;
    font-weight: 600;
    color: white;
    white-space: nowrap;
    z-index: 2;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.project-content-expanded {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 2.5rem;
    background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.7) 100%);
    border-radius: 24px;
    color: white;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.4s ease;
    z-index: 3;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.animated-project-card.active .project-content-expanded {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.animated-project-card.active .project-title-vertical {
    opacity: 0;
    visibility: hidden;
}

/* Desktop content styles */
.project-icon-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    height: 60px;
    border-radius: 20px;
    background: rgba(0, 188, 212, 0.15);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(0, 188, 212, 0.3);
    margin-bottom: 1.5rem;
    flex-shrink: 0;
}

.project-subtitle {
    font-size: 0.9rem;
    text-transform: uppercase;
    color: #00bcd4;
    margin-bottom: 0.8rem;
    font-weight: 600;
    letter-spacing: 1.5px;
}

.project-main-title {
    font-size: 2.2rem;
    font-weight: 800;
    margin-bottom: 1.2rem;
    line-height: 1.2;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.project-description-text {
    font-size: 1rem;
    line-height: 1.7;
    color: #e0e0e0;
    margin-bottom: 2rem;
    flex-grow: 1;
    min-height: 0;
}

.project-tech-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
    margin-bottom: 2rem;
    flex-shrink: 0;
}

.tech-tag-animated {
    background: rgba(0, 188, 212, 0.2);
    color: #00e5ff;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    border: 1px solid rgba(0, 188, 212, 0.4);
    transition: all 0.3s ease;
}

.tech-tag-animated:hover {
    background: rgba(0, 188, 212, 0.3);
    transform: translateY(-2px);
}

.project-links-animated {
    display: flex;
    gap: 1rem;
    flex-shrink: 0;
}

.project-link-animated {
    padding: 1rem 2rem;
    border-radius: 15px;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    position: relative;
    overflow: hidden;
}

.project-link-primary {
    background: linear-gradient(135deg, #00bcd4, #00acc1);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
}

.project-link-secondary {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(10px);
}

.project-link-animated:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
}

/* Mobile Stack Container */
.mobile-stack-container {
    display: none;
    position: relative;
    height: 100vh;
    max-height: 800px;
    width: 100%;
    overflow: hidden;
    perspective: 1500px;
    background: transparent;
}

.mobile-stack-viewport {
    position: relative;
    width: 100%;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    scroll-snap-type: y mandatory;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.mobile-stack-viewport::-webkit-scrollbar {
    display: none;
}

/* Mobile Stack Card */
.mobile-stack-card {
    position: relative;
    width: 90%;
    max-width: 380px;
    height: 550px;
    margin: 2rem auto;
    border-radius: 25px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
    backdrop-filter: blur(30px);
    border: 1px solid rgba(0, 188, 212, 0.2);
    box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.4),
        0 10px 30px rgba(0, 188, 212, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    scroll-snap-align: center;
    transform-style: preserve-3d;
    overflow: hidden;
}

.mobile-stack-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        rgba(0, 188, 212, 0.8) 0%, 
        rgba(255, 107, 107, 0.8) 25%, 
        rgba(76, 175, 80, 0.8) 50%, 
        rgba(255, 193, 7, 0.8) 75%, 
        rgba(156, 39, 176, 0.8) 100%
    );
    background-size: 300% 100%;
    animation: gradientFlow 8s ease infinite;
    border-radius: 25px 25px 0 0;
}

@keyframes gradientFlow {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

/* Floating animation for stack cards */
.mobile-stack-card {
    animation: floatStack 6s ease-in-out infinite;
}

.mobile-stack-card:nth-child(even) {
    animation-delay: -3s;
}

@keyframes floatStack {
    0%, 100% { transform: translateY(0px) rotateX(2deg); }
    50% { transform: translateY(-15px) rotateX(-2deg); }
}

/* Hover/Active states */
.mobile-stack-card:hover,
.mobile-stack-card:focus,
.mobile-stack-card.in-view {
    transform: translateY(-20px) scale(1.03) rotateX(5deg);
    box-shadow: 
        0 35px 70px rgba(0, 0, 0, 0.5),
        0 15px 40px rgba(0, 188, 212, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.2);
    border-color: rgba(0, 188, 212, 0.4);
}

/* Touch feedback for mobile */
.mobile-stack-card:active {
    transform: translateY(-10px) scale(0.98) rotateX(3deg);
    transition: all 0.2s ease;
}

/* Stack Card Content */
.mobile-stack-content {
    position: relative;
    padding: 2.5rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    z-index: 2;
}

.mobile-stack-header {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.mobile-stack-icon {
    width: 70px;
    height: 70px;
    border-radius: 20px;
    background: linear-gradient(135deg, rgba(0, 188, 212, 0.3), rgba(0, 188, 212, 0.1));
    backdrop-filter: blur(20px);
    border: 2px solid rgba(0, 188, 212, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    color: #00bcd4;
    flex-shrink: 0;
    box-shadow: 0 10px 25px rgba(0, 188, 212, 0.2);
    transition: all 0.3s ease;
}

.mobile-stack-card:hover .mobile-stack-icon {
    transform: scale(1.1) rotateY(10deg);
    box-shadow: 0 15px 30px rgba(0, 188, 212, 0.4);
}

.mobile-stack-info {
    flex-grow: 1;
    min-width: 0;
}

.mobile-stack-subtitle {
    font-size: 0.85rem;
    color: #00bcd4;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    opacity: 0.9;
}

.mobile-stack-title {
    font-size: 1.6rem;
    font-weight: 800;
    color: white;
    margin: 0;
    line-height: 1.3;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.mobile-stack-description {
    flex-grow: 1;
    color: rgba(255, 255, 255, 0.85);
    font-size: 0.95rem;
    line-height: 1.7;
    margin-bottom: 2rem;
    font-weight: 400;
}

.mobile-stack-tech {
    display: flex;
    flex-wrap: wrap;
    gap: 0.7rem;
    margin-bottom: 2rem;
}

.mobile-stack-tech-tag {
    background: linear-gradient(135deg, rgba(0, 188, 212, 0.25), rgba(0, 188, 212, 0.15));
    color: #00e5ff;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    border: 1px solid rgba(0, 188, 212, 0.3);
    backdrop-filter: blur(10px);
    white-space: nowrap;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 188, 212, 0.1);
}

.mobile-stack-tech-tag:hover {
    background: linear-gradient(135deg, rgba(0, 188, 212, 0.4), rgba(0, 188, 212, 0.25));
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 188, 212, 0.2);
}

.mobile-stack-links {
    display: flex;
    gap: 1rem;
    flex-shrink: 0;
}

.mobile-stack-link {
    flex: 1;
    padding: 1.2rem 1.5rem;
    border-radius: 15px;
    text-decoration: none;
    font-weight: 700;
    font-size: 0.9rem;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
    position: relative;
    overflow: hidden;
    min-height: 48px;
}

.mobile-stack-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
}

.mobile-stack-link:hover::before {
    left: 100%;
}

.mobile-stack-link.primary {
    background: linear-gradient(135deg, #00bcd4, #00acc1);
    color: white;
    box-shadow: 0 8px 25px rgba(0, 188, 212, 0.3);
}

.mobile-stack-link.primary:hover {
    background: linear-gradient(135deg, #00acc1, #0097a7);
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0, 188, 212, 0.4);
}

.mobile-stack-link.secondary {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.1));
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(15px);
}

.mobile-stack-link.secondary:hover {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15));
    border-color: rgba(0, 188, 212, 0.5);
    transform: translateY(-3px);
    color: #00bcd4;
}

/* Scroll Progress Indicator */
.stack-progress {
    position: fixed;
    top: 50%;
    right: 1rem;
    transform: translateY(-50%);
    display: none;
    flex-direction: column;
    gap: 0.5rem;
    z-index: 1000;
}

.progress-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transition: all 0.4s ease;
    cursor: pointer;
}

.progress-dot.active {
    background: #00bcd4;
    transform: scale(1.5);
    box-shadow: 0 0 10px rgba(0, 188, 212, 0.5);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .projects-showcase {
        display: none !important;
    }
    
    .mobile-stack-container {
        display: block;
    }
    
    .stack-progress {
        display: flex;
    }
    
    .mobile-stack-card {
        width: 95%;
        height: 520px;
        margin: 1.5rem auto;
    }
    
    .mobile-stack-content {
        padding: 2rem;
    }
    
    .mobile-stack-header {
        gap: 1rem;
        margin-bottom: 1.5rem;
    }
    
    .mobile-stack-icon {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    
    .mobile-stack-title {
        font-size: 1.4rem;
    }
    
    .mobile-stack-links {
        flex-direction: column;
        gap: 0.8rem;
    }
}

@media (max-width: 480px) {
    .mobile-stack-card {
        width: 98%;
        height: 500px;
        margin: 1rem auto;
    }
    
    .mobile-stack-content {
        padding: 1.5rem;
    }
    
    .mobile-stack-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 1rem;
    }
    
    .mobile-stack-icon {
        width: 55px;
        height: 55px;
    }
    
    .mobile-stack-title {
        font-size: 1.3rem;
    }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    .mobile-stack-card:hover {
        transform: none;
    }
    
    .mobile-stack-card.in-view {
        transform: translateY(-10px) scale(1.02);
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .mobile-stack-card {
        border: 2px solid #00bcd4;
        background: rgba(0, 0, 0, 0.9);
    }
    
    .mobile-stack-tech-tag {
        border: 2px solid #00bcd4;
        background: rgba(0, 188, 212, 0.3);
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .mobile-stack-card {
        animation: none;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .mobile-stack-card::before {
        animation: none;
    }
}
        /* GitHub Dashboard Styles */
/* GitHub Dashboard Styles */
.github-dashboard {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
    border-radius: 25px;
    padding: 2.5rem;
    margin-bottom: 2rem;
    border: 1px solid rgba(0, 188, 212, 0.2);
    backdrop-filter: blur(20px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
}

.github-dashboard::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #00bcd4, #4caf50, #ff9800, #e91e63);
    background-size: 300% 100%;
    animation: gradientShift 6s ease-in-out infinite;
}

@keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.github-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
}

.stat-card {
    background: linear-gradient(135deg, rgba(0, 188, 212, 0.1), rgba(0, 188, 212, 0.05));
    border-radius: 20px;
    padding: 2rem 1.5rem;
    text-align: center;
    border: 1px solid rgba(0, 188, 212, 0.2);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(0, 188, 212, 0.1) 0%, transparent 70%);
    transform: scale(0);
    transition: transform 0.6s ease;
}

.stat-card:hover::before {
    transform: scale(1);
}

.stat-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 15px 40px rgba(0, 188, 212, 0.3);
    border-color: rgba(0, 188, 212, 0.4);
}

.stat-icon {
    font-size: 2.8rem;
    color: #00bcd4;
    margin-bottom: 1.2rem;
    position: relative;
    z-index: 2;
    transition: all 0.3s ease;
}

.stat-card:hover .stat-icon {
    transform: scale(1.1);
    color: #00e5ff;
}

.stat-value {
    font-size: 2.2rem;
    font-weight: 800;
    color: #fff;
    margin-bottom: 0.8rem;
    position: relative;
    z-index: 2;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.stat-label {
    color: #ccc;
    font-size: 0.95rem;
    font-weight: 500;
    position: relative;
    z-index: 2;
    letter-spacing: 0.5px;
}

.repos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.repo-card {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
    border-radius: 20px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.repo-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #00bcd4, #4caf50, #ff9800);
    transform: scaleX(0);
    transition: transform 0.4s ease;
}

.repo-card:hover::before {
    transform: scaleX(1);
}

.repo-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
    border-color: rgba(0, 188, 212, 0.3);
}

.repo-header {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.repo-icon {
    color: #00bcd4;
    font-size: 1.8rem;
    margin-top: 0.2rem;
    flex-shrink: 0;
    transition: all 0.3s ease;
}

.repo-card:hover .repo-icon {
    transform: scale(1.1);
    color: #00e5ff;
}

.repo-info h4 {
    color: #fff;
    font-size: 1.3rem;
    margin-bottom: 0.8rem;
    font-weight: 700;
    line-height: 1.2;
}

.repo-info p {
    color: #bbb;
    font-size: 0.95rem;
    line-height: 1.5;
}

.repo-meta {
    display: flex;
    gap: 1.5rem;
    margin-top: 1.5rem;
    flex-wrap: wrap;
    align-items: center;
}

.repo-language {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    color: #ddd;
    font-size: 0.9rem;
    font-weight: 500;
}

.language-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
}

.repo-stats {
    display: flex;
    gap: 1.5rem;
    font-size: 0.9rem;
    color: #bbb;
}

.repo-stat {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    transition: color 0.3s ease;
}

.repo-stat:hover {
    color: #00bcd4;
}

.repo-links {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
    flex-wrap: wrap;
}

.repo-link {
    padding: 0.8rem 1.5rem;
    border-radius: 12px;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex;
    align-items: center;
    gap: 0.6rem;
    position: relative;
    overflow: hidden;
}

.repo-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s;
}

.repo-link:hover::before {
    left: 100%;
}

.repo-link.primary {
    background: linear-gradient(135deg, #00bcd4, #00acc1);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
}

.repo-link.primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 188, 212, 0.4);
}

.repo-link.secondary {
    background: rgba(255, 255, 255, 0.1);
    color: #ddd;
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.repo-link.secondary:hover {
    transform: translateY(-3px);
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(0, 188, 212, 0.4);
    color: #00bcd4;
}

.activity-section {
    margin-top: 3rem;
}

.activity-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.activity-header h3 {
    font-size: 1.8rem;
    font-weight: 700;
}

.activity-container {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    border-radius: 20px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}

.activity-grid {
    display: grid;
    grid-template-columns: repeat(53, 1fr);
    grid-template-rows: repeat(7, 1fr);
    gap: 3px;
    max-width: 900px;
    margin: 0 auto;
    padding: 1rem;
}

.activity-day {
    width: 12px;
    height: 12px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.08);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: pointer;
    position: relative;
}

.activity-day::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border-radius: 4px;
    background: linear-gradient(45deg, #00bcd4, #4caf50);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
}

.activity-day:hover::before {
    opacity: 0.3;
}

.activity-day:hover {
    transform: scale(1.3);
    z-index: 10;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

/* Enhanced GitHub-style contribution levels with better colors */
.activity-day.active-1 { 
    background: linear-gradient(135deg, #0e4429, #1a5f3f);
    box-shadow: 0 0 8px rgba(14, 68, 41, 0.4);
}
.activity-day.active-2 { 
    background: linear-gradient(135deg, #006d32, #00854a);
    box-shadow: 0 0 10px rgba(0, 109, 50, 0.5);
}
.activity-day.active-3 { 
    background: linear-gradient(135deg, #26a641, #2db84d);
    box-shadow: 0 0 12px rgba(38, 166, 65, 0.6);
}
.activity-day.active-4 { 
    background: linear-gradient(135deg, #39d353, #4ae168);
    box-shadow: 0 0 15px rgba(57, 211, 83, 0.7);
}

.activity-legend {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-top: 2rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.activity-legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: #ccc;
}

.legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 3px;
    transition: transform 0.2s ease;
}

.activity-legend-item:hover .legend-dot {
    transform: scale(1.2);
}

.activity-summary {
    text-align: center;
    margin-top: 1.5rem;
    color: #ddd;
    font-size: 0.9rem;
    padding: 1rem;
    background: rgba(0, 188, 212, 0.05);
    border-radius: 15px;
    border: 1px solid rgba(0, 188, 212, 0.1);
    font-weight: 500;
}

/* Enhanced Mobile Responsive Design */
@media (max-width: 1024px) {
    .github-dashboard {
        padding: 2rem;
        margin: 1rem 0.5rem;
        border-radius: 20px;
    }
    
    .github-stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1rem;
    }
    
    .repos-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
    }
    
    .activity-grid {
        grid-template-columns: repeat(40, 1fr);
        max-width: 600px;
        gap: 2px;
    }
    
    .activity-day {
        width: 10px;
        height: 10px;
    }
}

@media (max-width: 768px) {
    .github-dashboard {
        padding: 1.5rem;
        margin: 1rem 0.25rem;
        border-radius: 15px;
    }
    
    .github-stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
    }
    
    .stat-card {
        padding: 1.5rem 1rem;
        border-radius: 15px;
    }
    
    .stat-icon {
        font-size: 2rem;
        margin-bottom: 0.8rem;
    }
    
    .stat-value {
        font-size: 1.8rem;
        margin-bottom: 0.5rem;
    }
    
    .stat-label {
        font-size: 0.85rem;
    }
    
    .repos-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
        margin-top: 2rem;
    }
    
    .repo-card {
        padding: 1.5rem;
        border-radius: 15px;
    }
    
    .repo-header {
        gap: 1rem;
        margin-bottom: 1rem;
    }
    
    .repo-icon {
        font-size: 1.5rem;
    }
    
    .repo-info h4 {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
    }
    
    .repo-info p {
        font-size: 0.9rem;
    }
    
    .repo-meta {
        gap: 1rem;
        margin-top: 1rem;
    }
    
    .repo-stats {
        gap: 1rem;
    }
    
    .repo-links {
        gap: 0.8rem;
        margin-top: 1rem;
    }
    
    .repo-link {
        padding: 0.7rem 1.2rem;
        font-size: 0.85rem;
        border-radius: 10px;
    }
    
    .activity-section {
        margin-top: 2rem;
    }
    
    .activity-header {
        flex-direction: column;
        text-align: center;
        margin-bottom: 1.5rem;
        gap: 0.5rem;
    }
    
    .activity-header h3 {
        font-size: 1.5rem;
    }
    
    .activity-container {
        padding: 1.5rem;
        border-radius: 15px;
    }
    
    .activity-grid {
        grid-template-columns: repeat(26, 1fr);
        max-width: 350px;
        gap: 2px;
        padding: 0.5rem;
    }
    
    .activity-day {
        width: 9px;
        height: 9px;
        border-radius: 2px;
    }
    
    .activity-legend {
        flex-wrap: wrap;
        gap: 0.8rem;
        margin-top: 1.5rem;
        padding: 0.8rem;
    }
    
    .activity-legend-item {
        font-size: 0.8rem;
    }
    
    .legend-dot {
        width: 10px;
        height: 10px;
    }
    
    .activity-summary {
        font-size: 0.85rem;
        margin-top: 1rem;
        padding: 0.8rem;
    }
}

@media (max-width: 480px) {
    .github-dashboard {
        padding: 1rem;
        margin: 0.5rem 0;
        border-radius: 12px;
    }
    
    .github-stats-grid {
        grid-template-columns: 1fr 1fr;
        gap: 0.8rem;
    }
    
    .stat-card {
        padding: 1rem 0.8rem;
        border-radius: 12px;
    }
    
    .stat-icon {
        font-size: 1.8rem;
        margin-bottom: 0.6rem;
    }
    
    .stat-value {
        font-size: 1.5rem;
    }
    
    .stat-label {
        font-size: 0.8rem;
    }
    
    .repo-card {
        padding: 1.2rem;
    }
    
    .repo-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.8rem;
    }
    
    .repo-links {
        flex-direction: column;
        width: 100%;
    }
    
    .repo-link {
        justify-content: center;
        width: 100%;
    }
    
    .activity-grid {
        grid-template-columns: repeat(20, 1fr);
        max-width: 280px;
        gap: 1px;
    }
    
    .activity-day {
        width: 8px;
        height: 8px;
    }
    
    .activity-legend {
        flex-direction: column;
        gap: 0.5rem;
    }
}

/* Loading state improvements */
.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 3rem;
    color: #00bcd4;
    font-size: 1.1rem;
    background: rgba(0, 188, 212, 0.05);
    border-radius: 15px;
    border: 1px solid rgba(0, 188, 212, 0.1);
}

.loading i {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
        /* Voice Chatbot Styles */
.voice-chatbot {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 1002;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.voice-chatbot-toggle {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(45deg, #9c27b0, #673ab7);
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(156, 39, 176, 0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

.voice-chatbot-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(156, 39, 176, 0.4);
}

.voice-chatbot-toggle.listening {
    background: linear-gradient(45deg, #4caf50, #45a049);
    animation: voicePulse 1.5s infinite;
}

.voice-chatbot-toggle.processing {
    background: linear-gradient(45deg, #ff9800, #f57c00);
    animation: voiceProcessing 2s linear infinite;
}

.voice-chatbot-toggle.speaking {
    background: linear-gradient(45deg, #00bcd4, #00acc1);
    animation: voiceSpeaking 0.8s ease-in-out infinite alternate;
}

@keyframes voicePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.15); }
}

@keyframes voiceProcessing {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes voiceSpeaking {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.08); opacity: 0.8; }
}

.voice-wave {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    border: 2px solid rgba(76, 175, 80, 0.4);
    border-radius: 50%;
    opacity: 0;
    animation: voiceWave 2s infinite;
}

.voice-chatbot-toggle.listening .voice-wave {
    opacity: 1;
}

@keyframes voiceWave {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 0.4; }
    100% { transform: translate(-50%, -50%) scale(1.8); opacity: 0; }
}

.voice-status-bubble {
    position: absolute;
    bottom: 80px;
    left: 0;
    background: rgba(15, 15, 15, 0.95);
    border: 1px solid rgba(156, 39, 176, 0.3);
    color: #9c27b0;
    padding: 12px 18px;
    border-radius: 25px;
    font-size: 14px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    max-width: 250px;
    word-wrap: break-word;
    white-space: normal;
}

.voice-status-bubble.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(-5px);
}

.voice-status-bubble::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 8px solid rgba(15, 15, 15, 0.95);
}

.voice-help-panel {
    position: absolute;
    bottom: 80px;
    left: 80px;
    background: rgba(15, 15, 15, 0.95);
    border: 1px solid rgba(156, 39, 176, 0.3);
    border-radius: 15px;
    padding: 20px;
    width: 300px;
    backdrop-filter: blur(20px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.voice-help-panel.show {
    opacity: 1;
    visibility: visible;
    transform: translateX(10px);
}

.voice-help-panel h4 {
    color: #9c27b0;
    margin-bottom: 15px;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.voice-help-panel .help-examples {
    color: #ccc;
    font-size: 13px;
    line-height: 1.4;
}

.voice-help-panel .help-examples strong {
    color: #9c27b0;
    display: block;
    margin-top: 10px;
    margin-bottom: 5px;
}

.voice-conversation-history {
    position: absolute;
    bottom: 80px;
    left: 0;
    background: rgba(15, 15, 15, 0.95);
    border: 1px solid rgba(156, 39, 176, 0.3);
    border-radius: 15px;
    padding: 15px;
    width: 320px;
    max-height: 300px;
    backdrop-filter: blur(20px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow-y: auto;
}

.voice-conversation-history.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(-10px);
}

.voice-message {
    margin-bottom: 10px;
    font-size: 13px;
    padding: 8px 12px;
    border-radius: 12px;
    max-width: 90%;
}

.voice-message.user {
    background: rgba(156, 39, 176, 0.2);
    color: #9c27b0;
    margin-left: auto;
    text-align: right;
    border-bottom-right-radius: 4px;
}

.voice-message.bot {
    background: rgba(255, 255, 255, 0.1);
    color: #ccc;
    border-bottom-left-radius: 4px;
}

/* Light theme adjustments */
body.light-theme .voice-status-bubble {
    background: rgba(255, 255, 255, 0.95);
    color: #9c27b0;
    border-color: rgba(156, 39, 176, 0.3);
}

body.light-theme .voice-status-bubble::after {
    border-top-color: rgba(255, 255, 255, 0.95);
}

body.light-theme .voice-help-panel,
body.light-theme .voice-conversation-history {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(156, 39, 176, 0.3);
}

body.light-theme .voice-help-panel .help-examples,
body.light-theme .voice-message.bot {
    color: #333;
}

body.light-theme .voice-message.user {
    background: rgba(156, 39, 176, 0.15);
}

/* Mobile responsive */
@media (max-width: 768px) {
    .voice-chatbot {
        bottom: 15px;
        left: 15px;
    }
    
    .voice-chatbot-toggle {
        width: 55px;
        height: 55px;
        font-size: 22px;
        background: linear-gradient(45deg, #9c27b0, #673ab7);
        box-shadow: 0 4px 20px rgba(156, 39, 176, 0.4);
        border: 3px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .voice-chatbot-toggle:active {
        transform: scale(0.95);
        box-shadow: 0 2px 10px rgba(156, 39, 176, 0.6);
    }
    
    .voice-chatbot-toggle.listening {
        background: linear-gradient(45deg, #4caf50, #45a049);
        animation: voicePulse 1.5s infinite, voiceRipple 2s infinite;
        box-shadow: 0 6px 25px rgba(76, 175, 80, 0.5);
    }
    
    .voice-chatbot-toggle.processing {
        background: linear-gradient(45deg, #ff9800, #f57c00);
        animation: voiceProcessing 1.5s linear infinite;
        box-shadow: 0 6px 25px rgba(255, 152, 0, 0.5);
    }
    
    .voice-chatbot-toggle.speaking {
        background: linear-gradient(45deg, #00bcd4, #00acc1);
        animation: voiceSpeaking 0.6s ease-in-out infinite alternate;
        box-shadow: 0 6px 25px rgba(0, 188, 212, 0.5);
    }
    
    .voice-help-panel {
        width: calc(100vw - 120px);
        left: 70px;
        bottom: 75px;
        max-width: 350px;
        font-size: 13px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    }
    
    .voice-conversation-history {
        width: calc(100vw - 50px);
        max-height: 250px;
        bottom: 75px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    }
    
    .voice-status-bubble {
        max-width: 220px;
        font-size: 12px;
        bottom: 75px;
        left: -10px;
        border-radius: 20px;
        padding: 10px 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }
    
    .voice-status-bubble::after {
        bottom: -6px;
        left: 25px;
        border-top: 6px solid rgba(15, 15, 15, 0.95);
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
    }
}

@media (max-width: 480px) {
    .voice-chatbot-toggle {
        width: 50px;
        height: 50px;
        font-size: 20px;
        border: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    .voice-help-panel {
        width: calc(100vw - 90px);
        left: 60px;
        padding: 15px;
        font-size: 12px;
        bottom: 65px;
    }
    
    .voice-conversation-history {
        width: calc(100vw - 40px);
        max-height: 200px;
        bottom: 65px;
        left: -10px;
    }
    
    .voice-status-bubble {
        max-width: 180px;
        font-size: 11px;
        bottom: 65px;
        left: -15px;
    }
}

/* Enhanced animations for mobile */
@keyframes voiceRipple {
    0% {
        box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7), 0 6px 25px rgba(76, 175, 80, 0.5);
    }
    50% {
        box-shadow: 0 0 0 10px rgba(76, 175, 80, 0.3), 0 6px 25px rgba(76, 175, 80, 0.5);
    }
    100% {
        box-shadow: 0 0 0 20px rgba(76, 175, 80, 0), 0 6px 25px rgba(76, 175, 80, 0.5);
    }
}

/* Touch-specific optimizations */
@media (hover: none) and (pointer: coarse) {
    .voice-chatbot-toggle:hover {
        transform: none;
    }
    
    .voice-chatbot-toggle {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
    }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
    .voice-chatbot-toggle {
        -webkit-appearance: none;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-focus-ring-color: rgba(0,0,0,0);
        outline: none;
    }
    
    .voice-status-bubble {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }
}

/* Accessibility */
.voice-chatbot-toggle:focus {
    outline: 3px solid #9c27b0;
    outline-offset: 3px;
}

.voice-chatbot-toggle[aria-pressed="true"] {
    background: linear-gradient(45deg, #4caf50, #45a049);
}

/* Performance optimizations */
.voice-chatbot-toggle,
.voice-status-bubble,
.voice-help-panel,
.voice-conversation-history {
    will-change: transform, opacity;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
}

        /* Section Styles */
        .section {
            padding: 3rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            background: rgba(15, 15, 15, 0.8);
            border-radius: 15px;
            margin-top: 2rem;
            margin-bottom: 2rem;
        }

        .section h2 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
            color: #00bcd4;
        }

        /* Card Styles */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .company-icon {
            width: 50px;
            height: 50px;
            background: #00bcd4;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .card p {
            color: #aaa;
            margin-bottom: 0.5rem;
        }

        .duration {
            background: #00bcd4;
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .skill-tag {
            background: rgba(0, 188, 212, 0.2);
            color: #00bcd4;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        /* Project Section */
        .project-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s;
            margin-bottom: 2rem;
        }

        .project-card:hover {
            transform: translateY(-5px);
        }

        .project-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #00bcd4;
        }

        .project-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .btn-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-align: center;
            justify-content: center;
            min-width: 100px;
        }

        /* GitHub Button */
        .btn-link.github {
            background: transparent !important;
            color: #ff0000 !important;
            border: 2px solid #ff0000 !important;
        }
        .btn-link.github:hover {
            background: #ff0000 !important;
            color: #fff !important;
            transform: translateY(-2px);
        }

        /* Live Demo Button */
        .btn-link.demo {
            background: transparent !important;
            color: #ff0000 !important;
            border: 2px solid #ff0000 !important;
        }
        .btn-link.demo:hover {
            background: #ff0000 !important;
            color: #fff !important;
            transform: translateY(-2px);
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .tech {
            background: #00bcd4;
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        /* Education Cards */
        .education-card {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            padding: 20px;
            color: white;
            margin-bottom: 20px;
            background-size: cover;
            background-position: center;
            transition: all 0.4s ease;
        }

        .education-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.75);
            z-index: 1;
            transition: background 0.4s ease;
        }

        .education-card:hover::before {
            background: rgba(0,0,0,0.25);
        }
        .chatbot-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1001;
}

.chatbot-toggle {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(45deg, #00bcd4, #00acc1);
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 188, 212, 0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chatbot-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(0, 188, 212, 0.4);
}

.chatbot-window {
    position: absolute;
    bottom: 80px;
    right: 0;
    width: 350px;
    height: 500px;
    background: rgba(15, 15, 15, 0.95);
    border: 1px solid rgba(0, 188, 212, 0.3);
    border-radius: 15px;
    backdrop-filter: blur(20px);
    display: none;
    flex-direction: column;
    overflow: hidden;
}

.chatbot-window.open {
    display: flex;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.chatbot-header {
    padding: 15px;
    background: linear-gradient(45deg, #00bcd4, #00acc1);
    color: white;
    display: flex;
    align-items: center;
    gap: 10px;
}

.chatbot-header h4 {
    margin: 0;
    font-size: 16px;
}

.chatbot-status {
    width: 8px;
    height: 8px;
    background: #4caf50;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.chatbot-messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.chatbot-message {
    max-width: 80%;
    padding: 10px 15px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.4;
}

.chatbot-message.bot {
    background: rgba(0, 188, 212, 0.2);
    color: #00bcd4;
    align-self: flex-start;
    border-bottom-left-radius: 5px;
}

.chatbot-message.user {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 5px;
}

.chatbot-input-container {
    padding: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    gap: 10px;
}

.chatbot-input {
    flex: 1;
    padding: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 25px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 14px;
}

.chatbot-input:focus {
    outline: none;
    border-color: #00bcd4;
}

.chatbot-input::placeholder {
    color: #aaa;
}

.chatbot-send {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: #00bcd4;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.chatbot-send:hover {
    background: #00acc1;
    transform: scale(1.1);
}

.chatbot-typing {
    display: flex;
    gap: 3px;
    align-items: center;
    padding: 10px 15px;
}

.chatbot-typing span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #00bcd4;
    animation: typing 1.4s infinite;
}

.chatbot-typing span:nth-child(2) {
    animation-delay: 0.2s;
}

.chatbot-typing span:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typing {
    0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.4;
    }
    30% {
        transform: translateY(-10px);
        opacity: 1;
    }
}
@media (max-width: 768px) {
    .theme-toggle {
        right: 15px;
        top: 45%;
    }
    
    .chatbot-container {
        bottom: 15px;
        right: 15px;
    }
    
    .chatbot-window {
        width: 90vw;
        right: -15vw;
        height: 70vh;
    }
    
    .chatbot-toggle {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
}
/* REPLACE your existing mobile chatbot CSS with this fixed version */

/* Mobile responsive - FIXED VERSION */
@media (max-width: 768px) {
    .theme-toggle {
        right: 15px;
        top: 45%;
        width: 45px;
        height: 25px;
        padding: 6px;
    }
    
    .theme-toggle-inner {
        width: 35px;
        height: 18px;
    }
    
    .theme-toggle-circle {
        width: 16px;
        height: 16px;
        font-size: 8px;
    }
    
    body.light-theme .theme-toggle-circle {
        left: 17px;
    }
    
    .chatbot-container {
        bottom: 20px;
        right: 20px;
        position: fixed;
        z-index: 1001;
    }
    
    .chatbot-window {
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: calc(100vw - 40px);
        height: 70vh;
        max-height: 500px;
        min-height: 400px;
        background: rgba(15, 15, 15, 0.95);
        border: 1px solid rgba(0, 188, 212, 0.3);
        border-radius: 20px;
        backdrop-filter: blur(20px);
        display: none;
        flex-direction: column;
        overflow: hidden;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }
    
    .chatbot-window.open {
        display: flex;
        animation: slideUp 0.3s ease;
    }
    
    .chatbot-toggle {
        width: 55px;
        height: 55px;
        font-size: 22px;
        border-radius: 50%;
        background: linear-gradient(45deg, #00bcd4, #00acc1);
        border: none;
        color: white;
        cursor: pointer;
        box-shadow: 0 4px 20px rgba(0, 188, 212, 0.4);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .chatbot-toggle:hover {
        transform: scale(1.05);
    }
    
    .chatbot-header {
        padding: 18px 20px;
        background: linear-gradient(45deg, #00bcd4, #00acc1);
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
        border-radius: 20px 20px 0 0;
        flex-shrink: 0;
    }
    
    .chatbot-header h4 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
    }
    
    .chatbot-status {
        width: 8px;
        height: 8px;
        background: #4caf50;
        border-radius: 50%;
        animation: pulse 2s infinite;
        flex-shrink: 0;
    }
    
    .chatbot-messages {
        flex: 1;
        padding: 15px 18px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
        min-height: 0;
        -webkit-overflow-scrolling: touch;
    }
    
    .chatbot-message {
        max-width: 85%;
        padding: 12px 16px;
        border-radius: 18px;
        font-size: 14px;
        line-height: 1.4;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    .chatbot-message.bot {
        background: rgba(0, 188, 212, 0.2);
        color: #00bcd4;
        align-self: flex-start;
        border-bottom-left-radius: 6px;
    }
    
    .chatbot-message.user {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        align-self: flex-end;
        border-bottom-right-radius: 6px;
    }
    
    .chatbot-input-container {
        padding: 15px 18px 18px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        gap: 12px;
        align-items: flex-end;
        flex-shrink: 0;
        background: rgba(0, 0, 0, 0.1);
    }
    
    .chatbot-input {
        flex: 1;
        padding: 14px 18px;
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 16px;
        font-family: 'Inter', sans-serif;
        resize: none;
        min-height: 44px;
        max-height: 100px;
        transition: all 0.3s ease;
    }
    
    .chatbot-input:focus {
        outline: none;
        border-color: #00bcd4;
        background: rgba(255, 255, 255, 0.15);
        box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.1);
    }
    
    .chatbot-input::placeholder {
        color: #aaa;
        font-size: 14px;
    }
    
    .chatbot-send {
        width: 44px;
        height: 44px;
        border: none;
        border-radius: 50%;
        background: linear-gradient(45deg, #00bcd4, #00acc1);
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 188, 212, 0.3);
        font-size: 16px;
        flex-shrink: 0;
    }
    
    .chatbot-send:active {
        transform: scale(0.95);
    }
    
    .chatbot-typing {
        display: flex;
        gap: 3px;
        align-items: center;
        padding: 12px 16px;
        background: rgba(0, 188, 212, 0.15);
        border-radius: 18px;
        border-bottom-left-radius: 6px;
        align-self: flex-start;
    }
    
    /* Light theme mobile */
    body.light-theme .chatbot-window {
        background: rgba(255, 255, 255, 0.95);
        border: 1px solid rgba(0, 188, 212, 0.3);
    }
    
    body.light-theme .chatbot-message.user {
        background: rgba(0, 188, 212, 0.1);
        color: #333;
    }
    
    body.light-theme .chatbot-message.bot {
        background: rgba(0, 188, 212, 0.15);
        color: #00acc1;
    }
    
    body.light-theme .chatbot-input {
        background: rgba(0, 0, 0, 0.05);
        color: #333;
        border: 2px solid rgba(0, 0, 0, 0.1);
    }
    
    body.light-theme .chatbot-input:focus {
        background: rgba(0, 0, 0, 0.08);
        border-color: #00bcd4;
    }
    
    body.light-theme .chatbot-input::placeholder {
        color: #666;
    }
    
    body.light-theme .chatbot-input-container {
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        background: rgba(0, 0, 0, 0.02);
    }
    
    body.light-theme .chatbot-typing {
        background: rgba(0, 188, 212, 0.1);
    }
}

/* Extra small phones */
@media (max-width: 480px) {
    .chatbot-container {
        bottom: 15px;
        right: 15px;
    }
    
    .chatbot-window {
        bottom: 75px;
        right: 15px;
        width: calc(100vw - 30px);
        height: 65vh;
        max-height: 450px;
    }
    
    .chatbot-toggle {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    .chatbot-header {
        padding: 15px 16px;
    }
    
    .chatbot-header h4 {
        font-size: 15px;
    }
    
    .chatbot-messages {
        padding: 12px 15px;
        gap: 10px;
    }
    
    .chatbot-message {
        font-size: 13px;
        padding: 10px 14px;
        max-width: 90%;
    }
    
    .chatbot-input-container {
        padding: 12px 15px 15px;
        gap: 10px;
    }
    
    .chatbot-input {
        padding: 12px 16px;
        font-size: 16px;
    }
    
    .chatbot-send {
        width: 40px;
        height: 40px;
        font-size: 14px;
    }
}

/* Landscape phones */
@media (max-width: 768px) and (orientation: landscape) and (max-height: 500px) {
    .chatbot-window {
        height: 80vh;
        max-height: 350px;
    }
}


        .education-details {
            position: relative;
            z-index: 2;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
        }

        .tags {
            margin-top: 1rem;
        }

        .tags span {
            background: rgba(255,255,255,0.2);
            padding: 4px 8px;
            border-radius: 8px;
            margin: 3px;
            display: inline-block;
            font-size: 0.85em;
        }

        .year-tag {
            display: inline-block;
            margin-top: 8px;
            font-weight: bold;
        }

        /* Background images */
        .rv-bg {
            background-image: url("rv.png");
        }

        .dav-bg {
            background-image: url("dav.png");
        }

        /* IFFCO Card */
        .iffco-card {
            position: relative;
            overflow: hidden;
            color: #fff;
            z-index: 1;
        }

        .iffco-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url("iffco.png") center/cover no-repeat;
            opacity: 0.08;
            transition: opacity 0.5s ease-in-out;
            z-index: 0;
        }

        .iffco-card:hover::before {
            opacity: 0.35;
        }

        .iffco-card * {
            position: relative;
            z-index: 1;
        }

        /* Enhanced Certifications Section with Cool Hover Effects */
#certifications {
    background: linear-gradient(135deg, rgba(15, 15, 15, 0.95), rgba(30, 30, 30, 0.95));
    position: relative;
    overflow: hidden;
}

#certifications::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(0, 188, 212, 0.05) 0%, transparent 50%);
    pointer-events: none;
}

.cert-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
    padding: 2rem 0;
    position: relative;
    z-index: 2;
}

.cert-card {
    position: relative;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    border-radius: 20px;
    padding: 0;
    border: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    overflow: hidden;
    backdrop-filter: blur(10px);
    transform-style: preserve-3d;
    perspective: 1000px;
}

/* Floating Animation */
.cert-card {
    animation: certFloat 6s ease-in-out infinite;
}

.cert-card:nth-child(2) { animation-delay: -2s; }
.cert-card:nth-child(3) { animation-delay: -4s; }
.cert-card:nth-child(4) { animation-delay: -1s; }
.cert-card:nth-child(5) { animation-delay: -3s; }

@keyframes certFloat {
    0%, 100% { transform: translateY(0px) rotateX(0deg); }
    50% { transform: translateY(-10px) rotateX(2deg); }
}

/* Glowing Border Effect */
.cert-card::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, 
        rgba(0, 188, 212, 0.5),
        rgba(255, 107, 107, 0.5), 
        rgba(76, 175, 80, 0.5),
        rgba(255, 193, 7, 0.5),
        rgba(156, 39, 176, 0.5)
    );
    border-radius: 22px;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
    background-size: 400% 400%;
    animation: gradientShift 4s ease infinite;
}

@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Hover and Active States */
.cert-card:hover::before,
.cert-card:active::before {
    opacity: 1;
}

.cert-card:hover {
    transform: translateY(-15px) rotateX(10deg) rotateY(5deg) scale(1.02);
    box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.3),
        0 15px 35px rgba(0, 188, 212, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border-color: rgba(0, 188, 212, 0.4);
}

/* Active/Touch State */
.cert-card:active {
    transform: translateY(-8px) rotateX(8deg) rotateY(3deg) scale(0.98);
    transition: all 0.1s ease;
}

/* Certificate Content Container */
.cert-content {
    position: relative;
    padding: 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    z-index: 2;
}

/* Shimmer Effect on Image */
.cert-image-container {
    position: relative;
    margin-bottom: 1.5rem;
    overflow: hidden;
    border-radius: 15px;
    background: rgba(0, 188, 212, 0.05);
    padding: 1rem;
    width: 100%;
    max-width: 200px;
}

.cert-image {
    width: 100%;
    height: auto;
    border-radius: 10px;
    transition: all 0.4s ease;
    position: relative;
    z-index: 1;
}

.cert-image-container::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        45deg,
        transparent 30%,
        rgba(255, 255, 255, 0.3) 50%,
        transparent 70%
    );
    transform: translateX(-100%) translateY(-100%) rotate(45deg);
    transition: transform 0.6s ease;
    pointer-events: none;
}

.cert-card:hover .cert-image-container::before {
    transform: translateX(100%) translateY(100%) rotate(45deg);
}

.cert-card:hover .cert-image {
    transform: scale(1.1) rotate(2deg);
    filter: brightness(1.1) contrast(1.05);
}

/* Text Content Animations */
.cert-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 0.5rem;
    position: relative;
    overflow: hidden;
}

.cert-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #00bcd4, #ff6b6b);
    transition: all 0.4s ease;
    transform: translateX(-50%);
}

.cert-card:hover .cert-title::after {
    width: 100%;
}

.cert-description {
    color: #bbb;
    font-size: 0.95rem;
    line-height: 1.5;
    opacity: 0.8;
    transition: all 0.3s ease;
}

.cert-card:hover .cert-description {
    color: #ddd;
    opacity: 1;
}

/* Floating Particles Effect */
.cert-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(2px 2px at 20px 30px, rgba(0, 188, 212, 0.3), transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(255, 107, 107, 0.2), transparent),
        radial-gradient(1px 1px at 90px 40px, rgba(76, 175, 80, 0.3), transparent),
        radial-gradient(1px 1px at 130px 80px, rgba(255, 193, 7, 0.2), transparent);
    background-repeat: repeat;
    background-size: 200px 100px;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    animation: particleFloat 20s linear infinite;
}

.cert-card:hover::after {
    opacity: 1;
}

@keyframes particleFloat {
    0% { transform: translateY(0px) translateX(0px); }
    33% { transform: translateY(-10px) translateX(10px); }
    66% { transform: translateY(-20px) translateX(-5px); }
    100% { transform: translateY(-30px) translateX(15px); }
}

/* Mobile-Optimized Effects */
@media (max-width: 768px) {
    .cert-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
        padding: 1rem;
    }
    
    .cert-card {
        border-radius: 16px;
        transition: all 0.3s ease;
    }
    
    /* Enhanced Touch Feedback */
    .cert-card:active {
        transform: scale(0.95) rotateX(5deg);
        box-shadow: 
            0 10px 25px rgba(0, 0, 0, 0.4),
            0 5px 15px rgba(0, 188, 212, 0.3);
    }
    
    /* Touch Ripple Effect */
    .cert-card {
        position: relative;
        overflow: hidden;
    }
    
    .cert-card::before {
        border-radius: 18px;
    }
    
    /* Reduced floating animation for mobile */
    .cert-card {
        animation: certFloatMobile 8s ease-in-out infinite;
    }
    
    @keyframes certFloatMobile {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
    }
    
    /* Mobile hover simulation with touch */
    .cert-card:active .cert-image {
        transform: scale(1.05) rotate(1deg);
    }
    
    .cert-card:active .cert-title::after {
        width: 100%;
    }
    
    .cert-card:active::after {
        opacity: 1;
    }
}

@media (max-width: 480px) {
    .cert-content {
        padding: 1.5rem;
    }
    
    .cert-image-container {
        max-width: 150px;
        margin-bottom: 1rem;
    }
    
    .cert-title {
        font-size: 1.1rem;
    }
    
    .cert-description {
        font-size: 0.9rem;
    }
}

/* Special Effects for Individual Certificates */
.cert-card:nth-child(1) {
    background: linear-gradient(145deg, rgba(0, 188, 212, 0.1), rgba(0, 188, 212, 0.02));
}

.cert-card:nth-child(2) {
    background: linear-gradient(145deg, rgba(255, 107, 107, 0.1), rgba(255, 107, 107, 0.02));
}

.cert-card:nth-child(3) {
    background: linear-gradient(145deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.02));
}

.cert-card:nth-child(4) {
    background: linear-gradient(145deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.02));
}

.cert-card:nth-child(5) {
    background: linear-gradient(145deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.02));
}

/* Accessibility Improvements */
.cert-card:focus {
    outline: 3px solid rgba(0, 188, 212, 0.6);
    outline-offset: 2px;
    transform: translateY(-5px) scale(1.02);
}

.cert-card:focus::before {
    opacity: 1;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
    .cert-card {
        animation: none;
    }
    
    .cert-card::after {
        animation: none;
    }
    
    .cert-card::before {
        animation: none;
    }
    
    .cert-card:hover {
        transform: translateY(-5px) scale(1.02);
    }
}

        /* Contact Section */
        .contact-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .contact-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            justify-content: flex-start;
        }

        .contact-link:hover {
            background: rgba(0, 188, 212, 0.1);
            transform: translateY(-3px);
        }

        .contact-icon {
            width: 50px;
            height: 50px;
            background: #00bcd4;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem 1rem;
            color: #666;
            border-top: 1px solid #333;
            position: relative;
            z-index: 1;
            background: #0f0f0f;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            /* Navigation */
            .nav-container {
                padding: 0 1rem;
            }

            .nav-links {
                display: none;
            }

            .mobile-menu {
                display: block;
            }

            /* Hero Section */
            .hero {
                padding: 0 1rem;
                margin-top: 70px;
            }

            .hero-container {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 2rem;
                padding-top: 2rem;
            }

            .hero-text {
                order: 2;
            }

            .hero-image {
                order: 1;
            }

            .hero-text h1 {
                font-size: 2.2rem;
                line-height: 1.2;
            }

            .hero-text p {
                font-size: 1rem;
            }

            .profile-pic {
                width: 250px;
                height: 250px;
            }

            .buttons {
                justify-content: center;
                gap: 0.5rem;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
                min-width: 110px;
            }

            /* Sections */
            .section {
                padding: 2rem 1rem;
                margin-left: 0.5rem;
                margin-right: 0.5rem;
            }

            .section h2 {
                font-size: 2rem;
                margin-bottom: 2rem;
            }

            /* Cards */
            .card {
                padding: 1rem;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .duration {
                align-self: flex-start;
                margin-top: 0.5rem;
            }

            /* Project Cards */
            .project-card {
                padding: 1rem;
            }

            .project-card h3 {
                font-size: 1.2rem;
            }

            .project-links {
                justify-content: center;
                gap: 0.5rem;
            }

            .btn-link {
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
                min-width: 90px;
            }

            /* Skills */
            .skills-list {
                justify-content: center;
            }

            .skill-tag {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            /* Tech Stack */
            .tech-stack {
                justify-content: center;
            }

            .tech {
                font-size: 0.8rem;
                padding: 0.3rem 0.8rem;
            }

            /* Education Cards */
            .education-card {
                padding: 15px;
            }

            /* Certifications */
            .cert-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .cert-card {
                padding: 1rem;
            }

            /* Contact Links */
            .contact-links {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .contact-link {
                padding: 1rem;
            }

            /* Modal */
            .modal-content {
                width: 95%;
            }

            .close {
                top: 10px;
                right: 20px;
                font-size: 30px;
            }
        }

        /* Extra small devices */
        @media (max-width: 480px) {
            .hero-text h1 {
                font-size: 1.8rem;
            }

            .profile-pic {
                width: 200px;
                height: 200px;
            }

            .section h2 {
                font-size: 1.8rem;
            }

            .btn {
                padding: 0.7rem 1.2rem;
                font-size: 0.85rem;
            }

            .btn-link {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                min-width: 80px;
            }

            .project-links {
                flex-direction: column;
                align-items: center;
            }

            .skill-tag, .tech {
                font-size: 0.75rem;
                padding: 0.3rem 0.6rem;
            }
        }

        /* Landscape orientation on mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .hero {
                min-height: auto;
                padding: 1rem;
            }

            .hero-container {
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
            }

            .hero-text {
                order: 1;
            }

            .hero-image {
                order: 2;
            }

            .profile-pic {
                width: 200px;
                height: 200px;
            }
        }

        /* Smooth scrolling for anchor links */
        html {
            scroll-behavior: smooth;
        }

        /* Ensure text is readable on all devices */
        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }
        }

        /* Improve touch targets on mobile */
        @media (max-width: 768px) {
            .btn, .btn-link, .contact-link, .cert-card {
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChatbot()">
            <i class="fas fa-comments" id="chatbot-icon"></i>
        </button>
        
        <div class="chatbot-window" id="chatbot-window">
            <div class="chatbot-header">
                <div class="chatbot-status"></div>
                <h4>Chat with Ujjwal's Assistant</h4>
            </div>
            
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="chatbot-message bot">
                    👋 Hi! I'm Ujjwal's virtual assistant. I can help you learn more about his experience, skills, and projects. What would you like to know?
                </div>
            </div>
            
            <div class="chatbot-input-container">
                <input type="text" class="chatbot-input" id="chatbot-input" placeholder="Ask me anything..." onkeypress="handleChatKeyPress(event)">
                <button class="chatbot-send" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="voice-chatbot">
        <button class="voice-chatbot-toggle" id="voiceChatbotToggle" onclick="toggleVoiceChatbot()" 
                aria-label="Voice chatbot toggle" title="Click to talk">
            <i class="fas fa-microphone" id="voiceChatbotIcon"></i>
            <div class="voice-wave"></div>
        </button>
        
        <div class="voice-status-bubble" id="voiceStatusBubble">
            Click to ask me anything!
        </div>
        
        <div class="voice-help-panel" id="voiceHelpPanel">
            <h4><i class="fas fa-comments"></i> Voice Assistant</h4>
            <div class="help-examples">
                <strong>Ask me questions:</strong><br>
                "What are Ujjwal's skills?"<br>
                "Tell me about his experience"<br>
                "What's his CGPA?"<br>
                "Who are his parents?"<br><br>
                <strong>Navigate sections:</strong><br>
                "Go to projects"<br>
                "Show me skills section"<br>
                "Take me to certifications"<br>
                "Go to experience"<br>
                "Go to contact"<br><br>
                <strong>Other commands:</strong><br>
                "Show conversation" - View chat history<br>
                "Help" - Show this guide<br>
                "Stop listening" - End conversation
            </div>
        </div>
        
        <div class="voice-conversation-history" id="voiceConversationHistory">
            <h4 style="color: #9c27b0; margin-bottom: 10px; font-size: 14px;">
                <i class="fas fa-history"></i> Conversation History
            </h4>
            <div id="voiceMessages"></div>
        </div>
    </div>
    <div id="particles-js"></div>

    <nav class="nav">
        <div class="nav-container">
            <div class="logo">UB</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#experience">Experience</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#github-dashboard">GitHub</a></li>
                <li><a href="#skills-section">Skills</a></li>
                <li><a href="#certifications">Certifications</a></li>
                <li><a href="#contact">Contact</a></li>
               
            </ul>
            <div class="mobile-menu" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
        <div class="mobile-nav" id="mobileNav">
            <ul>
                <li><a href="#home" onclick="closeMobileMenu()">Home</a></li>
                <li><a href="#about" onclick="closeMobileMenu()">About</a></li>
                <li><a href="#experience" onclick="closeMobileMenu()">Experience</a></li>
                <li><a href="#projects" onclick="closeMobileMenu()">Projects</a></li>
                <li><a href="#projects" onclick="closeMobileMenu()">Github</a></li>
                <li><a href="#skills-section" onclick="closeMobileMenu()">Skills</a></li>
                <li><a href="#certifications" onclick="closeMobileMenu()">Certifications</a></li>
                <li><a href="#contact" onclick="closeMobileMenu()">Contact</a></li>
            </ul>
        </div>
    </nav>

    <section class="hero" id="home">
        <div class="hero-container">
            <div class="hero-text">
                <h1>
                    Hi, I'm <span class="gradient-text">Ujjwal&nbsp;Bajpai</span>
                </h1>
                
                <p>
                    IT intern @IFFCO | Pre-final year RVCE undergraduate | ML & Data Structures enthusiast| Member ACM Chapter @RVCE | Building efficient, real-world tech
                </p>
                <div class="buttons">
                    <a href="Resume_txt.pdf" class="btn btn-primary" target="_blank">
                        <i class="fas fa-download"></i>
                        Resume
                    </a>
                    <a href="#contact" class="btn btn-secondary">
                        <i class="fas fa-envelope"></i>
                        Contact
                    </a>
                </div>
            </div>

            <div class="hero-image">
                <img src="ujjwal_pic.jpg.png" alt="Ujjwal Bajpai" class="profile-pic">
            </div>
        </div>
    </section>

    <section class="section" id="about">
        <h2>About Me</h2>
        <div class="card" style="margin-bottom: 0;">
            <p style="font-size: 1.1rem; color: #ccc;">
                I'm a **pre-final year Electronics and Communication Engineering student at RV College of Engineering** with a keen interest in bridging the gap between hardware and software. Currently, I'm gaining practical experience as an **IT Intern at Indian Farmers Fertiliser Cooperative Limited (IFFCO)**, contributing to real-world technological solutions.
            </p>
            <p style="font-size: 1.1rem; color: #ccc; margin-top: 1rem;">
                My academic journey has ignited a strong passion for **circuit design, signal processing, and communication systems**. Complementing this, I possess robust programming skills in **Python and C++**, which I actively hone through problem-solving on LeetCode and collaborative contributions to projects on GitHub. I have a solid understanding and hands-on experience with **Data Structures and Algorithms (DSA)**, and I'm particularly enthusiastic about **Machine Learning**.
            </p>
            <p style="font-size: 1.1rem; color: #ccc; margin-top: 1rem;">
                Driven by an insatiable curiosity and a commitment to continuous learning, I thrive on developing innovative solutions that integrate my diverse technical expertise. My experience encompasses engaging academic projects, competitive hackathons, valuable internships, and self-initiated endeavors. In each of these, I've leveraged analytical thinking and adaptability to tackle complex challenges effectively. My ultimate goal is to apply my skills to contribute to the development of impactful and cutting-edge technologies.
            </p>
        </div>
    </section>

    <section class="section" id="experience">
        <h2>Experience</h2>
        
        <!-- IFFCO Experience Card with background -->
        <div class="card iffco-card">
          <div class="card-header">
            <div class="company-icon">
              <i class="fas fa-seedling"></i>
            </div>
            <div>
              <h3>IT Intern</h3>
              <p>Indian Farmers Fertiliser Coop Ltd.</p>
              <p>Aonla, Uttar Pradesh, India</p>
            </div>
            <div class="duration">Jul 2025 - Sep 2025</div>
          </div>
          <p>
            Contributed to web development tasks for the HRMS portal, enhancing user interface and functionality. 
            Participated in instrumentation and plant visits to gain insights into industrial automation systems and their IT integration. 
            Gained hands-on exposure to the IT infrastructure supporting large-scale manufacturing and administrative operations.
          </p>
          <div class="skills-list">
            <span class="skill-tag">Problem Solving</span>
            <span class="skill-tag">Communication</span>
            <span class="skill-tag">Software Development</span>
          </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="company-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div>
                    <h3>ACM Student Chapter Member</h3>
                    <p>RV College of Engineering</p>
                </div>
                <div class="duration">Jan 2025 - Present</div>
            </div>
            <p>Participated in college and external hackathons, applying problem-solving and coding skills in real-world challenges.
                Engaged with a network of peers and mentors, fostering collaboration and technical growth within the ACM community.</p>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="company-icon">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <div>
                    <h3>Rotaract Club Member</h3>
                    <p>RV College of Engineering</p>
                </div>
                <div class="duration">Dec 2023 - Present</div>
            </div>
            <p>Actively participated in diverse activities such as treks and marathons, contributing to team spirit and community engagement.
                Made meaningful contributions through donation drives and social initiatives, supporting community welfare.</p>
        </div>
    </section>

    <section class="section">
        <h2>Education</h2>
      
        <!-- RV Card -->
        <div class="education-card rv-bg">
          <div class="education-details">
            <h3><b>Bachelor of Engineering</b></h3>
            <p>RV College of Engineering</p>
            <p>Electronics and Communications Engineering</p>
            <p><b>CGPA: 8.52</b></p>
            <span class="year-tag">2023 - 2027</span>
            <div class="tags">
              <span>Python</span>
              <span>MySQL</span>
              <span>SOLIDWORKS</span>
              <span>SQL</span>
              <span>Machine Learning</span>
              <span>Data Structures</span>
            </div>
          </div>
        </div>
      
        <div class="education-card dav-bg">
            <div class="education-details">
              <h3><b>DAV Public School</b></h3>
              <p>Class 10th — <b>97.4%</b></p>
              <p>Class 12th — <b>91.8%</b></p>
              <span class="year-tag">2019 - 2023</span>
              <div class="tags">
                <span>Python</span>
                <span>MySQL</span>
                <span>Leadership</span>
                <span>Presentation Skills</span>
              </div>
            </div>
          </div>
        </section>

        <section class="section" id="projects">
            <h2>Featured Projects</h2>
            
            <div class="projects-showcase" id="projectsShowcase">
               
            </div>
        </section>
    <section class="section" id="github-dashboard">
        <h2><i class="fab fa-github"></i> GitHub Dashboard</h2>
        
        <div class="github-dashboard">
            <!-- GitHub Stats Grid -->
            <div class="github-stats-grid" id="githubStats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-code-branch"></i>
                    </div>
                    <div class="stat-value" id="totalRepos">Loading...</div>
                    <div class="stat-label">Public Repositories</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-value" id="totalStars">Loading...</div>
                    <div class="stat-label">Total Stars</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="stat-value" id="totalCommits">Loading...</div>
                    <div class="stat-label">Total Commits</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value" id="followers">Loading...</div>
                    <div class="stat-label">Followers</div>
                </div>
            </div>
    
            <!-- Top Repositories -->
            <h3 style="color: #00bcd4; margin-bottom: 1rem;">
                <i class="fas fa-trophy"></i> Featured Repositories
            </h3>
            <div class="repos-grid" id="topRepos">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>&nbsp;&nbsp;Loading repositories...
                </div>
            </div>
    
            <!-- GitHub Activity -->
            <div class="activity-section">
                <div class="activity-header">
                    <h3 style="color: #00bcd4;">
                        <i class="fas fa-chart-line"></i> Contribution Activity
                    </h3>
                    <div style="color: #aaa; font-size: 0.9rem;">
                        Past 52 weeks
                    </div>
                </div>
                <div class="activity-grid" id="activityGrid"></div>
                <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">
                    Contribution activity visualization
                </p>
            </div>
        </div>
    </section>
    <!-- LeetCode Dashboard Section -->


    <section class="section" id="skills-section">
        <h2>Skills</h2>

        <div class="card">
            <h3>Programming Languages</h3>
            <div class="skills-list">
                <span class="skill-tag">SQL</span>
                <span class="skill-tag">Verilog</span>
                <span class="skill-tag">MATLAB</span>
                <span class="skill-tag">C++</span>
                <span class="skill-tag">C</span>
                <span class="skill-tag">Python</span>
                <span class="skill-tag">HTML</span>
            </div>
        </div>

        <div class="card">
            <h3>Frameworks & Technologies</h3>
            <div class="skills-list">
                <span class="skill-tag">SOLIDWORKS</span>
                <span class="skill-tag">Battery Management Systems</span>
                <span class="skill-tag">Kaggle</span>
                <span class="skill-tag">Operating Systems</span>
                <span class="skill-tag">Git</span>
                <span class="skill-tag">MySQL</span>
                <span class="skill-tag">Streamlit</span>
                <span class="skill-tag">Object-Oriented Programming (OOP)</span>
                <span class="skill-tag">Data Science</span>
                <span class="skill-tag">Machine Learning</span>
                <span class="skill-tag">Deep Learning</span>
            </div>
        </div>

        <div class="card">
            <h3>Soft Skills</h3>
            <div class="skills-list">
                <span class="skill-tag">Communication</span>
                <span class="skill-tag">Team Leadership</span>
                <span class="skill-tag">Team Coordination</span>
                <span class="skill-tag">Presentation Skills</span>
                <span class="skill-tag">Problem Solving</span>
            </div>
        </div>
    </section>

    <section id="certifications" class="section">
        <h2>📜 Certifications</h2>
        <div class="cert-grid">
            <div class="cert-card" onclick="openCertModal('certificates/bitsp_api.png')">
                <img src="certificates/bitsp_api.png" alt="BITS Pilani Certificate" class="cert-image">
                <h4>BITS Pilani API Hackathon</h4>
                <p>2nd Runner-Up - AI-based Food Compliance System</p>
            </div>
    
            <div class="cert-card" onclick="openCertModal('certificates/infosys.png')">
                <img src="certificates/infosys.png" alt="Infosys Certificate" class="cert-image">
                <h4>Infosys Springboard</h4>
                <p>Advanced Programming Certification</p>
            </div>
    
            <div class="cert-card" onclick="openCertModal('certificates/nptel_dbms.png')">
                <img src="certificates/nptel_dbms.png" alt="NPTEL Certificate" class="cert-image">
                <h4>NPTEL</h4>
                <p>Database Management Systems</p>
            </div>
    
            <div class="cert-card" onclick="openCertModal('certificates/os_udemy.png')">
                <img src="certificates/os_udemy.png" alt="Udemy OS Certificate" class="cert-image">
                <h4>Udemy</h4>
                <p>Operating Systems Fundamentals</p>
            </div>
    
            <div class="cert-card" onclick="openCertModal('certificates/udemy_c++.png')">
                <img src="certificates/udemy_c++.png" alt="Udemy C++ Certificate" class="cert-image">
                <h4>Udemy</h4>
                <p>C++ Programming Mastery</p>
            </div>
        </div>
    </section>
    
    <div id="certModal" class="modal">
        <span class="close" onclick="closeCertModal()">&times;</span>
        <img class="modal-content" id="certModalImg">
    </div>
    
    <!-- Enhanced Contact Section - Replace the existing contact section with this -->
<section class="section" id="contact">
    <h2>Contact Me</h2>
    
    <div class="contact-container">
        <!-- Contact Form -->
        <div class="contact-form-wrapper">
            <div class="contact-form-card">
                <div class="form-header">
                    <h3><i class="fas fa-paper-plane"></i> Get In Touch</h3>
                    <p>Have a project in mind or want to collaborate? I'd love to hear from you!</p>
                </div>
                
                <form class="contact-form" id="contactForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name"><i class="fas fa-user"></i> Your Name</label>
                            <input type="text" id="name" name="name" required placeholder="John Doe">
                        </div>
                        
                        <div class="form-group">
                            <label for="email"><i class="fas fa-envelope"></i> Your Email</label>
                            <input type="email" id="email" name="email" required placeholder="john@example.com">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject"><i class="fas fa-tag"></i> Subject</label>
                        <input type="text" id="subject" name="subject" required placeholder="Let's work together!">
                    </div>
                    
                    <div class="form-group">
                        <label for="message"><i class="fas fa-comment"></i> Message</label>
                        <textarea id="message" name="message" rows="6" required placeholder="Tell me about your project or inquiry..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary send-btn">
                        <i class="fas fa-paper-plane"></i>
                        Send Message
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Social Links & Contact Info -->
        <div class="social-links-wrapper">
            <div class="social-header">
                <h3><i class="fas fa-share-alt"></i> Connect With Me</h3>
                <p>Find me on these platforms and let's connect!</p>
            </div>
            
            <div class="social-links-grid">
                <a href="https://www.linkedin.com/in/ujjwal-bajpai-9aa242289/" class="social-card linkedin" target="_blank" rel="noopener">
                    <div class="social-icon">
                        <i class="fab fa-linkedin-in"></i>
                    </div>
                    <div class="social-content">
                        <h4>LinkedIn</h4>
                        <p>Professional Network</p>
                        <span class="social-handle">@ujjwal-bajpai</span>
                    </div>
                    <div class="social-arrow">
                        <i class="fas fa-external-link-alt"></i>
                    </div>
                </a>
                
                <a href="https://github.com/Ujjwal120605" class="social-card github" target="_blank" rel="noopener">
                    <div class="social-icon">
                        <i class="fab fa-github"></i>
                    </div>
                    <div class="social-content">
                        <h4>GitHub</h4>
                        <p>Code Repository</p>
                        <span class="social-handle">@Ujjwal120605</span>
                    </div>
                    <div class="social-arrow">
                        <i class="fas fa-external-link-alt"></i>
                    </div>
                </a>
                
                <a href="https://leetcode.com/u/ujjwalbajpai/" class="social-card leetcode" target="_blank" rel="noopener">
                    <div class="social-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="social-content">
                        <h4>LeetCode</h4>
                        <p>Coding Practice</p>
                        <span class="social-handle">@ujjwalbajpai</span>
                    </div>
                    <div class="social-arrow">
                        <i class="fas fa-external-link-alt"></i>
                    </div>
                </a>
            </div>
            
            <!-- Direct Contact Info Cards -->
            <div class="contact-info-cards">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="contact-details">
                        <h4>Email</h4>
                        <p>bajpaiujjwal3@gmail.com</p>
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard('bajpaiujjwal3@gmail.com')">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="contact-details">
                        <h4>Phone</h4>
                        <p>+91 8737006908</p>
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard('+91 8737006908')">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>
 <!-- Location Section - Add after contact section -->
<section class="section" id="location">
    <h2>Current Location</h2>
    
    <div class="location-widget">
        <div class="location-header">
            <div class="location-status">
                <div class="status-dot inactive" id="statusDot"></div>
                <span id="statusText">Location services inactive</span>
            </div>
        </div>

        <div class="location-content">
            <!-- Static Location (Always Visible) -->
            <div class="location-card">
                <h3><i class="fas fa-university"></i> Study Location</h3>
                <div class="location-details">
                    <p><i class="fas fa-map"></i> <strong>Bangalore, Karnataka</strong></p>
                    <p><i class="fas fa-building"></i> RV College of Engineering</p>
                    <p><i class="fas fa-clock"></i> <span id="istTime">Loading time...</span></p>
                    
                </div>
            </div>

            <!-- Dynamic Current Location -->
            <div class="location-card current-location-card" id="currentLocationCard" style="display: none;">
                <h3><i class="fas fa-location-dot"></i> Current Area</h3>
                <div class="location-details" id="currentLocationDetails">
                    <p><i class="fas fa-spinner fa-spin"></i> Getting location...</p>
                </div>
            </div>
        </div>

        <!-- Map Container -->
        <div class="map-container">
            <iframe 
                id="locationMap"
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d248849.886539092!2d77.49085452148434!3d12.953945614655863!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bae1670c9b44e6d%3A0xf8dfc3e8517e4fe0!2sBengaluru%2C%20Karnataka!5e0!3m2!1sen!2sin!4v1703847234567!5m2!1sen!2sin"
                allowfullscreen="" 
                loading="lazy">
            </iframe>
            <div class="map-overlay" id="mapOverlay">
                📍 Study Location: Bangalore
            </div>
        </div>

        <div class="location-controls">
            <button class="location-btn" onclick="shareLocation()" id="shareBtn">
                <i class="fas fa-share-alt"></i>
                Share Current Location
            </button>
            <button class="location-btn danger" onclick="clearLocation()" id="clearBtn" style="display: none;">
                <i class="fas fa-eye-slash"></i>
                Hide Location
            </button>
        </div>

    </div>
</section>

<style>
/* Enhanced Contact Section Styles */
.contact-container {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 4rem;
    align-items: start;
    margin-top: 2rem;
}

/* Contact Form Styles */
.contact-form-wrapper {
    width: 100%;
}

.contact-form-card {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    border-radius: 20px;
    padding: 2.5rem;
    border: 1px solid rgba(0, 188, 212, 0.2);
    backdrop-filter: blur(20px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
}

.contact-form-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #00bcd4, #ff6b6b, #4caf50, #ff9800);
    background-size: 300% 100%;
    animation: gradientShift 3s ease-in-out infinite;
}

@keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.form-header h3 {
    font-size: 1.8rem;
    color: #00bcd4;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.8rem;
}

.form-header p {
    color: #aaa;
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

.contact-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    color: #ccc;
    margin-bottom: 0.8rem;
    font-weight: 500;
    font-size: 0.95rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.form-group label i {
    color: #00bcd4;
}

.form-group input,
.form-group textarea {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1.2rem;
    color: #fff;
    font-family: 'Inter', sans-serif;
    font-size: 1rem;
    transition: all 0.3s ease;
    resize: vertical;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #00bcd4;
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.1);
    transform: translateY(-2px);
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: #888;
}

.send-btn {
    margin-top: 1rem;
    align-self: flex-start;
    padding: 1.2rem 2.5rem;
    font-size: 1.1rem;
    border-radius: 12px;
    background: linear-gradient(45deg, #00bcd4, #00acc1);
    border: none;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.send-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

.send-btn:hover::before {
    left: 100%;
}

.send-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 188, 212, 0.3);
}

/* Social Links Styles */
.social-links-wrapper {
    width: 100%;
}

.social-header h3 {
    font-size: 1.8rem;
    color: #00bcd4;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.8rem;
}

.social-header p {
    color: #aaa;
    margin-bottom: 2rem;
    font-size: 1rem;
}

.social-links-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
}

.social-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 15px;
    text-decoration: none;
    color: white;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
}

.social-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 3px;
    height: 100%;
    background: #00bcd4;
    transform: scaleY(0);
    transition: transform 0.3s ease;
}

.social-card:hover::before {
    transform: scaleY(1);
}

.social-card:hover {
    transform: translateX(5px);
    background: rgba(255, 255, 255, 0.1);
}

.social-card.linkedin:hover { box-shadow: 0 5px 20px rgba(0, 119, 181, 0.3); }
.social-card.github:hover { box-shadow: 0 5px 20px rgba(88, 96, 105, 0.3); }
.social-card.leetcode:hover { box-shadow: 0 5px 20px rgba(255, 161, 22, 0.3); }

.social-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    flex-shrink: 0;
}

.social-card.linkedin .social-icon { background: linear-gradient(45deg, #0077b5, #005885); }
.social-card.github .social-icon { background: linear-gradient(45deg, #333, #24292e); }
.social-card.leetcode .social-icon { background: linear-gradient(45deg, #ffa116, #ff8f00); }

.social-content {
    flex-grow: 1;
}

.social-content h4 {
    margin: 0;
    font-size: 1.2rem;
    color: #fff;
    font-weight: 600;
}

.social-content p {
    margin: 0.2rem 0;
    color: #aaa;
    font-size: 0.9rem;
}

.social-handle {
    color: #00bcd4;
    font-size: 0.85rem;
    font-weight: 500;
}

.social-arrow {
    color: #666;
    transition: all 0.3s ease;
}

.social-card:hover .social-arrow {
    color: #00bcd4;
    transform: translateX(3px);
}

/* Contact Info Cards */
.contact-info-cards {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.contact-info-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.2rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
}

.contact-info-card:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-2px);
}

.contact-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(45deg, #00bcd4, #00acc1);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    flex-shrink: 0;
}

.contact-details {
    flex-grow: 1;
}

.contact-details h4 {
    margin: 0;
    font-size: 1rem;
    color: #fff;
    font-weight: 600;
}

.contact-details p {
    margin: 0.2rem 0 0 0;
    color: #aaa;
    font-size: 0.9rem;
}

.copy-btn {
    background: rgba(0, 188, 212, 0.2);
    border: 1px solid rgba(0, 188, 212, 0.3);
    border-radius: 8px;
    padding: 0.5rem;
    color: #00bcd4;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.copy-btn:hover {
    background: rgba(0, 188, 212, 0.3);
    transform: scale(1.1);
}

/* Responsive Design */
@media (max-width: 968px) {
    .contact-container {
        grid-template-columns: 1fr;
        gap: 3rem;
    }
}

@media (max-width: 768px) {
    .contact-form-card {
        padding: 2rem;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .form-header h3 {
        font-size: 1.6rem;
    }
    
    .social-header h3 {
        font-size: 1.6rem;
    }
    
    .social-card {
        padding: 1.2rem;
    }
    
    .social-icon {
        width: 45px;
        height: 45px;
        font-size: 1.1rem;
    }
}

@media (max-width: 480px) {
    .contact-form-card {
        padding: 1.5rem;
        border-radius: 15px;
    }
    
    .form-header h3 {
        font-size: 1.4rem;
    }
    
    .social-header h3 {
        font-size: 1.4rem;
    }
    
    .send-btn {
        width: 100%;
        justify-content: center;
    }
    
    .social-card {
        padding: 1rem;
    }
    
    .contact-info-card {
        padding: 1rem;
    }
}
</style>

<script>
// Enhanced contact form handling
document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const subject = document.getElementById('subject').value;
    const message = document.getElementById('message').value;
    
    // Create mailto link with form data
    const mailtoLink = `mailto:bajpaiujjwal3@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(
        `Hello Ujjwal,\n\nName: ${name}\nEmail: ${email}\n\nMessage:\n${message}\n\nBest regards,\n${name}`
    )}`;
    
    // Open default email client
    window.location.href = mailtoLink;
    
    // Show success feedback
    const submitBtn = document.querySelector('.send-btn');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-check"></i> Message Sent!';
    submitBtn.style.background = 'linear-gradient(45deg, #4caf50, #45a049)';
    
    setTimeout(() => {
        submitBtn.innerHTML = originalText;
        submitBtn.style.background = 'linear-gradient(45deg, #00bcd4, #00acc1)';
        document.getElementById('contactForm').reset();
    }, 3000);
});

// Copy to clipboard function
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // Show temporary feedback
        const copyBtns = document.querySelectorAll('.copy-btn');
        copyBtns.forEach(btn => {
            if (btn.onclick && btn.onclick.toString().includes(text)) {
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i>';
                btn.style.background = 'rgba(76, 175, 80, 0.3)';
                btn.style.color = '#4caf50';
                
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.style.background = 'rgba(0, 188, 212, 0.2)';
                    btn.style.color = '#00bcd4';
                }, 2000);
            }
        });
    }).catch(function(err) {
        console.error('Could not copy text: ', err);
    });
}

// Add smooth animations on scroll
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Observe contact elements for animation
document.addEventListener('DOMContentLoaded', function() {
    const contactElements = document.querySelectorAll('.contact-form-card, .social-card, .contact-info-card');
    contactElements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
        observer.observe(el);
    });
});
</script>

    <footer class="footer">
        <p>&copy; 2025 Ujjwal Bajpai. All rights reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Particles.js configuration
        particlesJS('particles-js', {
            "particles": {
                "number": {
                    "value": 80,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#ffffff"
                },
                "shape": {
                    "type": "circle",
                    "stroke": {
                        "width": 0,
                        "color": "#000000"
                    },
                    "polygon": {
                        "nb_sides": 5
                    },
                    "image": {
                        "src": "img/github.svg",
                        "width": 100,
                        "height": 100
                    }
                },
                "opacity": {
                    "value": 0.5,
                    "random": false,
                    "anim": {
                        "enable": false,
                        "speed": 1,
                        "opacity_min": 0.1,
                        "sync": false
                    }
                },
                "size": {
                    "value": 3,
                    "random": true,
                    "anim": {
                        "enable": false,
                        "speed": 40,
                        "size_min": 0.1,
                        "sync": false
                    }
                },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#ffffff",
                    "opacity": 0.4,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 6,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {
                        "enable": false,
                        "rotateX": 600,
                        "rotateY": 1200
                    }
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": true,
                        "mode": "grab"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                },
                "modes": {
                    "grab": {
                        "distance": 140,
                        "line_linked": {
                            "opacity": 1
                        }
                    },
                    "bubble": {
                        "distance": 400,
                        "size": 40,
                        "duration": 2,
                        "opacity": 8,
                        "speed": 3
                    },
                    "repulse": {
                        "distance": 200,
                        "duration": 0.4
                    },
                    "push": {
                        "particles_nb": 4
                    },
                    "remove": {
                        "particles_nb": 2
                    }
                }
            },
            "retina_detect": true
        });

        // Mobile menu toggle functions
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const menuIcon = document.querySelector('.mobile-menu i');
            
            mobileNav.classList.toggle('active');
            
            if (mobileNav.classList.contains('active')) {
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
            } else {
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            }
        }

        function closeMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const menuIcon = document.querySelector('.mobile-menu i');
            
            mobileNav.classList.remove('active');
            menuIcon.classList.remove('fa-times');
            menuIcon.classList.add('fa-bars');
        }

        // Certificate modal functions
        function openCertModal(imageSrc) {
            const modal = document.getElementById('certModal');
            const modalImg = document.getElementById('certModalImg');
            modal.style.display = 'block';
            modalImg.src = imageSrc;
        }

        function closeCertModal() {
            const modal = document.getElementById('certModal');
            modal.style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('certModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileNav = document.getElementById('mobileNav');
            const mobileMenu = document.querySelector('.mobile-menu');
            const navContainer = document.querySelector('.nav-container');
            
            if (!navContainer.contains(event.target) && mobileNav.classList.contains('active')) {
                closeMobileMenu();
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            const mobileNav = document.getElementById('mobileNav');
            if (window.innerWidth > 768 && mobileNav.classList.contains('active')) {
                closeMobileMenu();
            }
        });
        function toggleTheme() {
    const body = document.body;
    const themeIcon = document.getElementById('theme-icon');
    
    body.classList.toggle('light-theme');
    
    if (body.classList.contains('light-theme')) {
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
        localStorage.setItem('theme', 'light');
    } else {
        themeIcon.classList.remove('fa-sun');
        themeIcon.classList.add('fa-moon');
        localStorage.setItem('theme', 'dark');
    }
}

// Load saved theme
function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    const body = document.body;
    const themeIcon = document.getElementById('theme-icon');
    
    if (savedTheme === 'light' || (!savedTheme && window.matchMedia('(prefers-color-scheme: light)').matches)) {
        body.classList.add('light-theme');
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
    }
}

// Chatbot Functionality
let chatbotOpen = false;

function toggleChatbot() {
    const chatbotWindow = document.getElementById('chatbot-window');
    const chatbotIcon = document.getElementById('chatbot-icon');
    
    chatbotOpen = !chatbotOpen;
    
    if (chatbotOpen) {
        chatbotWindow.classList.add('open');
        chatbotIcon.classList.remove('fa-comments');
        chatbotIcon.classList.add('fa-times');
    } else {
        chatbotWindow.classList.remove('open');
        chatbotIcon.classList.remove('fa-times');
        chatbotIcon.classList.add('fa-comments');
    }
}

function sendMessage() {
    const input = document.getElementById('chatbot-input');
    const message = input.value.trim();
    
    if (message) {
        addMessage(message, 'user');
        input.value = '';
        
        // Show typing indicator
        showTyping();
        
        // Generate response
        setTimeout(() => {
            hideTyping();
            const response = generateResponse(message);
            addMessage(response, 'bot');
        }, 1000 + Math.random() * 1000);
    }
}

function addMessage(message, sender) {
    const messagesContainer = document.getElementById('chatbot-messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `chatbot-message ${sender}`;
    messageDiv.textContent = message;
    
    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function showTyping() {
    const messagesContainer = document.getElementById('chatbot-messages');
    const typingDiv = document.createElement('div');
    typingDiv.className = 'chatbot-typing';
    typingDiv.id = 'typing-indicator';
    typingDiv.innerHTML = '<span></span><span></span><span></span>';
    
    messagesContainer.appendChild(typingDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function hideTyping() {
    const typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) {
        typingIndicator.remove();
    }
}

// Enhanced generateResponse function with comprehensive knowledge base
// Enhanced generateResponse function with family information included
function generateResponse(message) {
    const lowerMessage = message.toLowerCase();
    
    // Create comprehensive knowledge base
    const knowledgeBase = {
        // Personal Information
        name: "Ujjwal Bajpai",
        age: calculateAge("2005-06-12"),
        location: "Agra, Uttar Pradesh, India",
        currentLocation: "Bangalore, Karnataka (for college)",
        
        // Family Information
        family: {
            father: "Ajay Bajpai",
            mother: "Soni Bajpai",
            surname: "Bajpai"
        },
        
        // Education Details
        education: {
            current: {
                degree: "Bachelor of Engineering in Electronics and Communication",
                college: "RV College of Engineering (RVCE)",
                cgpa: "8.52",
                year: "Pre-final year (2023-2027)",
                location: "Bangalore, Karnataka"
            },
            school: {
                name: "DAV Public School",
                class10: "97.4%",
                class12: "91.8%",
                years: "2019-2023",
                location: "Agra, Uttar Pradesh"
            }
        },
        
        // Contact Information
        contact: {
            email: "bajpaiujjwal3@gmail.com",
            phone: "+91 8737006908",
            linkedin: "https://www.linkedin.com/in/ujjwal-bajpai-9aa242289/",
            github: "https://github.com/Ujjwal120605",
            leetcode: "https://leetcode.com/u/ujjwalbajpai/"
        },
        
        // Experience
        experience: [
            {
                role: "IT Intern",
                company: "Indian Farmers Fertiliser Cooperative Limited (IFFCO)",
                duration: "July 2025 - September 2025",
                location: "Aonla, Uttar Pradesh",
                responsibilities: ["HRMS portal development", "Web development tasks", "Industrial automation exposure"]
            },
            {
                role: "ACM Student Chapter Member",
                organization: "RV College of Engineering",
                duration: "January 2025 - Present",
                activities: ["Hackathon participation", "Technical collaboration"]
            },
            {
                role: "Rotaract Club Member",
                organization: "RV College of Engineering",
                duration: "December 2023 - Present",
                activities: ["Community service", "Social initiatives", "Team activities"]
            }
        ],
        
        // Skills
        skills: {
            programming: ["Python", "C++", "C", "SQL", "HTML", "CSS", "JavaScript", "Verilog", "MATLAB"],
            technologies: ["MySQL", "Git", "SOLIDWORKS", "Streamlit", "Machine Learning", "Deep Learning", "Data Science"],
            domains: ["Data Structures & Algorithms", "Machine Learning", "Web Development", "Database Management", "Circuit Design"],
            soft_skills: ["Communication", "Team Leadership", "Problem Solving", "Presentation Skills", "Team Coordination"]
        },
        
        // Projects
        projects: [
            {
                name: "Responsive Personal Resume Website",
                description: "Modern portfolio website with downloadable PDF resume",
                tech: ["HTML", "CSS", "JavaScript", "Responsive Design"],
                links: {
                    github: "https://github.com/Ujjwal120605/CV",
                    demo: "https://cv-seven-puce.vercel.app/"
                }
            },
            {
                name: "Hyperspectral Crop Mapping using Machine Learning",
                description: "Deep learning model for crop classification using CNN architectures",
                tech: ["Python", "Machine Learning", "CNN", "Remote Sensing"],
                domain: "Agriculture Technology"
            },
            {
                name: "IFFCO Login & Information Website",
                description: "Web application with secure login and interactive sections",
                tech: ["HTML", "CSS", "JavaScript", "JSON"],
                links: {
                    github: "https://github.com/Ujjwal120605/iffco_project",
                    demo: "https://iffco-project.vercel.app/"
                }
            },
            {
                name: "Metaverse Website",
                description: "Modern Next.js project with 3D web experiences",
                tech: ["Next.js", "React", "Tailwind CSS", "JavaScript"],
                links: {
                    github: "https://github.com/Ujjwal120605/metaverse-website",
                    demo: "https://metaverse-website-mocha.vercel.app/"
                }
            },
            {
                name: "Noise Cancellation using Machine Learning",
                description: "ML-based pipeline for real-time background noise suppression",
                tech: ["Python", "Machine Learning", "Audio Processing"],
                links: {
                    github: "https://github.com/Ujjwal120605/CognitiveNoiseCancellation"
                }
            }
        ],
        
        // Achievements & Certifications
        achievements: [
            {
                title: "BITS Pilani API Hackathon - 2nd Runner-Up",
                description: "AI-based Food Compliance System",
                year: "2024"
            }
        ],
        
        certifications: [
            "NPTEL - Database Management Systems",
            "Infosys Springboard - Advanced Programming",
            "Udemy - C++ Programming Mastery",
            "Udemy - Operating Systems Fundamentals"
        ],
        
        // Interests
        interests: ["Machine Learning", "Data Structures & Algorithms", "Web Development", "Circuit Design", "Problem Solving", "Competitive Programming"]
    };
    
    // Helper function to calculate age
    function calculateAge(birthDate) {
        const today = new Date();
        const birth = new Date(birthDate);
        let age = today.getFullYear() - birth.getFullYear();
        const monthDiff = today.getMonth() - birth.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
            age--;
        }
        return age;
    }
    
    // Enhanced keyword matching with synonyms and variations
    function matchesKeywords(message, keywords) {
        return keywords.some(keyword => message.includes(keyword));
    }
    
    // Family Information Responses - NEW SECTION
    if (matchesKeywords(lowerMessage, ['parents', 'family', 'mother', 'father', 'mom', 'dad', 'family members'])) {
        return `Ujjwal's parents are ${knowledgeBase.family.father} (father) and ${knowledgeBase.family.mother} (mother). The family surname is ${knowledgeBase.family.surname}.`;
    }
    
    if (matchesKeywords(lowerMessage, ['father', 'dad', 'papa', 'father name', "father's name"])) {
        return `Ujjwal's father's name is ${knowledgeBase.family.father}.`;
    }
    
    if (matchesKeywords(lowerMessage, ['mother', 'mom', 'mama', 'mother name', "mother's name", 'mummy'])) {
        return `Ujjwal's mother's name is ${knowledgeBase.family.mother}.`;
    }
    
    if (matchesKeywords(lowerMessage, ['surname', 'last name', 'family name', 'bajpai'])) {
        return `The family surname is ${knowledgeBase.family.surname}. His full name is ${knowledgeBase.name}.`;
    }
    
    // Personal Information Responses
    if (matchesKeywords(lowerMessage, ['name', 'who are you', 'who is ujjwal', 'your name', 'full name'])) {
        return `His full name is ${knowledgeBase.name}. He's a passionate Electronics and Communication Engineering student currently in his pre-final year at RVCE.`;
    }
    
    if (matchesKeywords(lowerMessage, ['age', 'how old', 'old is he', 'years old'])) {
        return `Ujjwal is ${knowledgeBase.age} years old, born in 2005.`;
    }
    
    if (matchesKeywords(lowerMessage, ['from', 'hometown', 'where is he from', 'location', 'city'])) {
        return `Ujjwal is from ${knowledgeBase.location}. He's currently studying in ${knowledgeBase.currentLocation} at RV College of Engineering.`;
    }
    
    // Education Responses - Detailed
    if (matchesKeywords(lowerMessage, ['cgpa', 'gpa', 'grades', 'marks in college', 'college marks'])) {
        return `Ujjwal has a CGPA of ${knowledgeBase.education.current.cgpa} in his Electronics and Communication Engineering degree at RVCE.`;
    }
    
    if (matchesKeywords(lowerMessage, ['10th', 'tenth', 'class 10', 'board exam', '10th marks', '10th percentage'])) {
        return `Ujjwal scored ${knowledgeBase.education.school.class10} in his Class 10th board exams from DAV Public School.`;
    }
    
    if (matchesKeywords(lowerMessage, ['12th', 'twelfth', 'class 12', '12th marks', '12th percentage', 'intermediate'])) {
        return `Ujjwal achieved ${knowledgeBase.education.school.class12} in his Class 12th board exams from DAV Public School.`;
    }
    
    if (matchesKeywords(lowerMessage, ['school', 'dav', 'schooling', 'where did he study'])) {
        return `Ujjwal completed his schooling at ${knowledgeBase.education.school.name} (${knowledgeBase.education.school.years}) with ${knowledgeBase.education.school.class10} in 10th and ${knowledgeBase.education.school.class12} in 12th.`;
    }
    
    if (matchesKeywords(lowerMessage, ['college', 'rvce', 'rv college', 'university', 'degree', 'graduation'])) {
        return `Ujjwal is pursuing ${knowledgeBase.education.current.degree} at ${knowledgeBase.education.current.college} with a CGPA of ${knowledgeBase.education.current.cgpa}. He's currently in his ${knowledgeBase.education.current.year}.`;
    }
    
    if (matchesKeywords(lowerMessage, ['ece', 'electronics', 'communication', 'branch', 'stream', 'major'])) {
        return `Ujjwal is studying Electronics and Communication Engineering (ECE) at RVCE. This field combines his interests in circuit design, signal processing, and communication systems.`;
    }
    
    // Contact Information
    if (matchesKeywords(lowerMessage, ['contact', 'email', 'reach', 'get in touch', 'mail'])) {
        return `You can reach Ujjwal at:\n📧 Email: ${knowledgeBase.contact.email}\n📱 Phone: ${knowledgeBase.contact.phone}\n💼 LinkedIn: Check his profile\n💻 GitHub: ${knowledgeBase.contact.github}`;
    }
    
    if (matchesKeywords(lowerMessage, ['phone', 'number', 'call', 'mobile'])) {
        return `Ujjwal's phone number is ${knowledgeBase.contact.phone}. Feel free to give him a call!`;
    }
    
    if (matchesKeywords(lowerMessage, ['linkedin', 'professional network'])) {
        return `You can connect with Ujjwal on LinkedIn to see his professional updates and network with him.`;
    }
    
    // Skills - Detailed
    if (matchesKeywords(lowerMessage, ['programming', 'languages', 'code', 'coding'])) {
        return `Ujjwal is proficient in: ${knowledgeBase.skills.programming.join(', ')}. He's particularly strong in Python and C++ for problem-solving and development.`;
    }
    
    if (matchesKeywords(lowerMessage, ['python', 'py'])) {
        return `Ujjwal is highly skilled in Python and uses it for machine learning projects, data analysis, web development, and competitive programming.`;
    }
    
    if (matchesKeywords(lowerMessage, ['c++', 'cpp', 'c plus plus'])) {
        return `Ujjwal is proficient in C++ and actively uses it for Data Structures & Algorithms practice on LeetCode and competitive programming.`;
    }
    
    if (matchesKeywords(lowerMessage, ['sql', 'database', 'mysql'])) {
        return `Ujjwal has strong database skills with SQL and MySQL. He's also certified in Database Management Systems from NPTEL.`;
    }
    
    if (matchesKeywords(lowerMessage, ['web development', 'html', 'css', 'javascript', 'frontend'])) {
        return `Ujjwal has web development skills in HTML, CSS, and JavaScript. You can see his work in his portfolio website and IFFCO project.`;
    }
    
    if (matchesKeywords(lowerMessage, ['solidworks', 'cad', 'design'])) {
        return `Ujjwal is skilled in SOLIDWORKS for 3D modeling and design, which complements his Electronics and Communication Engineering background.`;
    }
    
    // Machine Learning & Technical
    if (matchesKeywords(lowerMessage, ['machine learning', 'ml', 'ai', 'artificial intelligence', 'deep learning'])) {
        return `Ujjwal is passionate about Machine Learning and has worked on projects like Hyperspectral Crop Mapping and Noise Cancellation using ML techniques. He's experienced with various ML algorithms and deep learning approaches.`;
    }
    
    if (matchesKeywords(lowerMessage, ['data structures', 'algorithms', 'dsa', 'leetcode'])) {
        return `Ujjwal actively practices Data Structures & Algorithms on LeetCode and has strong problem-solving skills. He uses C++ and Python for competitive programming and technical interviews.`;
    }
    
    // Experience - Detailed
    if (matchesKeywords(lowerMessage, ['experience', 'work', 'job', 'internship', 'intern'])) {
        return `Ujjwal's experience includes:\n🏢 IT Intern at IFFCO (July-Sep 2025) - HRMS portal development\n👥 ACM Chapter Member at RVCE (Jan 2025-Present)\n🤝 Rotaract Club Member at RVCE (Dec 2023-Present)`;
    }
    
    if (matchesKeywords(lowerMessage, ['iffco', 'fertilizer', 'internship work', 'current work'])) {
        return `At IFFCO, Ujjwal works as an IT Intern contributing to HRMS portal development, web development tasks, and gaining exposure to industrial automation systems and IT infrastructure.`;
    }
    
    if (matchesKeywords(lowerMessage, ['acm', 'chapter', 'hackathon', 'competitive'])) {
        return `As an ACM Student Chapter Member at RVCE, Ujjwal participates in hackathons and collaborates on technical projects. He was 2nd Runner-Up at BITS Pilani API Hackathon!`;
    }
    
    // Projects - Comprehensive
    if (matchesKeywords(lowerMessage, ['projects', 'portfolio', 'work', 'built', 'developed'])) {
        const projectList = knowledgeBase.projects.map(p => `• ${p.name}`).join('\n');
        return `Ujjwal has worked on several impressive projects:\n${projectList}\n\nWould you like to know more about any specific project?`;
    }
    
    if (matchesKeywords(lowerMessage, ['website', 'portfolio site', 'personal website'])) {
        return `Ujjwal built his responsive personal portfolio website using HTML, CSS, and JavaScript. It features a modern design, downloadable resume, and showcases all his work professionally.`;
    }
    
    if (matchesKeywords(lowerMessage, ['hyperspectral', 'crop mapping', 'agriculture'])) {
        return `The Hyperspectral Crop Mapping project uses deep learning and CNN architectures for crop classification from satellite imagery. It's aimed at precision agriculture and automated crop health monitoring.`;
    }
    
    if (matchesKeywords(lowerMessage, ['noise cancellation', 'audio', 'signal processing'])) {
        return `Ujjwal developed an ML-based noise cancellation system for real-time background noise suppression in audio signals, combining his ECE background with machine learning expertise.`;
    }
    
    if (matchesKeywords(lowerMessage, ['metaverse', 'nextjs', 'react'])) {
        return `The Metaverse Website is a modern Next.js project showcasing 3D web experiences with React and Tailwind CSS. It demonstrates his frontend development skills and modern web technologies.`;
    }
    
    // Achievements
    if (matchesKeywords(lowerMessage, ['achievements', 'awards', 'hackathon', 'winner', 'bits pilani'])) {
        return `Ujjwal's notable achievement includes being 2nd Runner-Up at BITS Pilani API Hackathon for developing an AI-based Food Compliance System. He actively participates in various hackathons and competitions.`;
    }
    
    // Certifications
    if (matchesKeywords(lowerMessage, ['certifications', 'certificates', 'courses', 'nptel', 'infosys', 'udemy'])) {
        const certList = knowledgeBase.certifications.join('\n• ');
        return `Ujjwal's certifications include:\n• ${certList}\n\nThese demonstrate his commitment to continuous learning and skill development.`;
    }
    
    // GitHub & Online Presence
    if (matchesKeywords(lowerMessage, ['github', 'repositories', 'code', 'open source'])) {
        return `Ujjwal's GitHub (${knowledgeBase.contact.github}) showcases his projects and contributions. You can find his portfolio website, IFFCO project, Metaverse website, and ML projects there.`;
    }
    
    if (matchesKeywords(lowerMessage, ['leetcode', 'competitive programming', 'problem solving'])) {
        return `Ujjwal actively practices on LeetCode (${knowledgeBase.contact.leetcode}) and has strong problem-solving skills in Data Structures & Algorithms using C++ and Python.`;
    }
    
    // Career & Future
    if (matchesKeywords(lowerMessage, ['career', 'future', 'goals', 'plans', 'aspiration'])) {
        return `Ujjwal aims to bridge the gap between hardware and software, combining his ECE background with programming skills. He's interested in ML, embedded systems, and developing innovative tech solutions.`;
    }
    
    if (matchesKeywords(lowerMessage, ['looking for', 'opportunities', 'hiring', 'job', 'internship opportunity'])) {
        return `Ujjwal is always open to exciting opportunities in software development, machine learning, and electronics. Feel free to reach out to him with interesting projects or positions!`;
    }
    
    // Interests & Personal
    if (matchesKeywords(lowerMessage, ['interests', 'hobbies', 'likes', 'passionate about'])) {
        return `Ujjwal is passionate about ${knowledgeBase.interests.join(', ')}. He enjoys solving complex problems and building innovative solutions that make a real-world impact.`;
    }
    
    if (matchesKeywords(lowerMessage, ['personality', 'person', 'character', 'about him'])) {
        return `Ujjwal is a curious and driven individual with strong analytical thinking and adaptability. He thrives on continuous learning and enjoys collaborating on innovative projects.`;
    }
    
    // Resume & CV
    if (matchesKeywords(lowerMessage, ['resume', 'cv', 'download', 'pdf'])) {
        return `You can download Ujjwal's detailed resume from the homepage of his portfolio. It contains comprehensive information about his experience, education, skills, projects, and achievements.`;
    }
    
    // Greetings & Common Phrases
    if (matchesKeywords(lowerMessage, ['hello', 'hi', 'hey', 'greetings'])) {
        return `Hello! I'm here to help you learn more about Ujjwal Bajpai. Feel free to ask about his education, experience, projects, skills, achievements, or anything else you'd like to know!`;
    }
    
    if (matchesKeywords(lowerMessage, ['thanks', 'thank you', 'appreciate'])) {
        return `You're welcome! If you have any other questions about Ujjwal's background, projects, experience, or skills, feel free to ask. I'm here to help!`;
    }
    
    if (matchesKeywords(lowerMessage, ['help', 'what can you tell', 'information'])) {
        return `I can tell you about Ujjwal's education (CGPA: 8.52, 10th: 97.4%, 12th: 91.8%), current internship at IFFCO, programming skills, ML projects, achievements, family (parents: Ajay and Soni Bajpai), and much more! What would you like to know?`;
    }
    
    // Specific technical queries
    if (matchesKeywords(lowerMessage, ['percentage', '%', 'marks', 'scores'])) {
        return `Ujjwal's academic scores: 10th - ${knowledgeBase.education.school.class10}, 12th - ${knowledgeBase.education.school.class12}, Current CGPA - ${knowledgeBase.education.current.cgpa}`;
    }
    
    // Default responses for unrecognized queries
    const defaultResponses = [
        "That's an interesting question! Could you be more specific? I can tell you about Ujjwal's education, experience, projects, skills, achievements, or family.",
        "I'd be happy to help! You can ask me about his CGPA (8.52), board percentages (10th: 97.4%, 12th: 91.8%), internship at IFFCO, projects, family (parents: Ajay and Soni Bajpai), or technical skills.",
        "Feel free to ask about specific topics like his machine learning projects, programming skills, hackathon achievements, academic performance, or family background.",
        "I can provide detailed information about Ujjwal's background. Try asking about his education, work experience, technical skills, project details, or family!"
    ];
    
    return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
}

function handleChatKeyPress(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
}

// Initialize theme on page load
document.addEventListener('DOMContentLoaded', function() {
    loadTheme();
    
    // Add some predefined quick questions after a delay
    setTimeout(() => {
        if (Math.random() > 0.7) { // 30% chance to show suggestion
            const suggestions = [
                "Try asking: 'Tell me about his projects'",
                "Try asking: 'What are his skills?'",
                "Try asking: 'How can I contact him?'"
            ];
            const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            addMessage(randomSuggestion, 'bot');
        }
    }, 5000);
});

// Close chatbot when clicking outside
document.addEventListener('click', function(event) {
    const chatbotContainer = document.querySelector('.chatbot-container');
    if (chatbotOpen && !chatbotContainer.contains(event.target)) {
        toggleChatbot();
    }

    
    
});
/**
 * Enhanced Voice Chatbot with cross-platform support
 * Optimized for iPhone, Android, and Desktop browsers
 */
 class VoiceChatbot {
    constructor() {
        this.isListening = false;
        this.isSpeaking = false;
        this.recognition = null;
        this.synthesis = window.speechSynthesis;
        this.isSupported = this.checkSupport();
        this.currentUtterance = null;
        this.conversationHistory = [];
        this.helpVisible = false;
        this.historyVisible = false;
        this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        this.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        this.voices = [];
        this.preferredVoice = null;
        this.retryCount = 0;
        this.maxRetries = 3;
        
        this.initializeVoices();
        
        if (this.isSupported) {
            this.initializeRecognition();
            this.showWelcomeMessage();
        } else {
            this.showUnsupportedMessage();
        }
    }
    
    checkSupport() {
        const hasRecognition = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
        const hasSynthesis = 'speechSynthesis' in window;
        
        if (!hasRecognition || !hasSynthesis) {
            console.warn('Speech APIs not fully supported');
        }
        
        return hasRecognition && hasSynthesis;
    }
    
    initializeVoices() {
        // Wait for voices to load (especially important on mobile)
        const loadVoices = () => {
            this.voices = this.synthesis.getVoices();
            
            if (this.voices.length === 0) {
                setTimeout(loadVoices, 100);
                return;
            }
            
            // Find best voice for different platforms
            if (this.isIOS) {
                this.preferredVoice = this.voices.find(voice => 
                    voice.lang.includes('en') && (
                        voice.name.includes('Samantha') || 
                        voice.name.includes('Alex') ||
                        voice.name.includes('Victoria')
                    )
                ) || this.voices.find(voice => voice.lang.includes('en-US'));
            } else {
                this.preferredVoice = this.voices.find(voice => 
                    voice.lang.includes('en') && (
                        voice.name.includes('Google') || 
                        voice.name.includes('Microsoft') ||
                        voice.name.includes('Chrome')
                    )
                ) || this.voices.find(voice => voice.lang.includes('en'));
            }
            
            console.log('Voice initialized:', this.preferredVoice?.name || 'Default voice');
        };
        
        if (this.synthesis.getVoices().length === 0) {
            this.synthesis.addEventListener('voiceschanged', loadVoices);
        }
        loadVoices();
    }
    
    showWelcomeMessage() {
        setTimeout(() => {
            this.showStatus("Click to ask me anything about Ujjwal!", 3000);
        }, 1000);
    }
    
    initializeRecognition() {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        
        if (!SpeechRecognition) {
            console.error('Speech recognition not supported');
            return;
        }
        
        this.recognition = new SpeechRecognition();
        
        // Enhanced configuration for better mobile support
        this.recognition.continuous = false;
        this.recognition.interimResults = false;
        this.recognition.lang = 'en-US';
        this.recognition.maxAlternatives = 3; // Get multiple alternatives for better accuracy
        
        // Mobile-specific optimizations
        if (this.isMobile) {
            this.recognition.grammars = undefined; // Remove grammars for mobile compatibility
        }
        
        this.recognition.onstart = () => {
            console.log('Speech recognition started');
            this.isListening = true;
            this.retryCount = 0;
            this.updateUI('listening');
            this.showStatus('Listening... Speak clearly!');
            
            // Auto-timeout for mobile devices
            if (this.isMobile) {
                setTimeout(() => {
                    if (this.isListening) {
                        this.stopListening();
                        this.showStatus('Listening timeout. Tap to try again!', 3000);
                    }
                }, 10000);
            }
        };
        
        this.recognition.onresult = (event) => {
            console.log('Speech recognition result:', event);
            
            let question = '';
            let confidence = 0;
            
            // Try to get the best result from alternatives
            if (event.results && event.results.length > 0) {
                const result = event.results[0];
                if (result.length > 0) {
                    question = result[0].transcript.trim();
                    confidence = result[0].confidence || 0;
                    
                    // If confidence is low and we have alternatives, try the next one
                    if (confidence < 0.7 && result.length > 1) {
                        const altResult = result[1];
                        if (altResult.confidence > confidence) {
                            question = altResult.transcript.trim();
                            confidence = altResult.confidence;
                        }
                    }
                }
            }
            
            console.log(`Recognized: "${question}" (confidence: ${confidence})`);
            
            if (question.length > 0) {
                this.updateUI('processing');
                this.showStatus('Processing your question...');
                this.processVoiceQuestion(question);
            } else {
                this.handleRecognitionRetry('No speech detected');
            }
        };
        
        this.recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            
            let errorMessage = 'Speech recognition error';
            
            switch (event.error) {
                case 'no-speech':
                    errorMessage = 'No speech detected. Try speaking louder!';
                    break;
                case 'audio-capture':
                    errorMessage = 'Microphone access denied or unavailable';
                    break;
                case 'not-allowed':
                    errorMessage = 'Microphone permission denied. Please allow microphone access!';
                    break;
                case 'network':
                    errorMessage = 'Network error. Check your connection!';
                    break;
                case 'service-not-allowed':
                    errorMessage = 'Speech recognition service not available';
                    break;
                case 'bad-grammar':
                case 'language-not-supported':
                    errorMessage = 'Language not supported';
                    break;
                default:
                    errorMessage = `Recognition error: ${event.error}`;
            }
            
            this.handleRecognitionError(errorMessage);
        };
        
        this.recognition.onend = () => {
            console.log('Speech recognition ended');
            
            if (this.isListening) {
                this.isListening = false;
                this.updateUI('idle');
                
                // Don't show message if we're processing a result
                if (!this.isSpeaking) {
                    this.showStatus('Tap to speak again', 2000);
                }
            }
        };
    }
    
    handleRecognitionError(message) {
        this.isListening = false;
        this.updateUI('idle');
        
        if (this.retryCount < this.maxRetries) {
            this.retryCount++;
            this.showStatus(`${message} Retrying... (${this.retryCount}/${this.maxRetries})`, 3000);
            
            setTimeout(() => {
                if (!this.isListening && !this.isSpeaking) {
                    this.startListening();
                }
            }, 1500);
        } else {
            this.showStatus(`${message} Please try again!`, 5000);
        }
    }
    
    handleRecognitionRetry(reason) {
        if (this.retryCount < this.maxRetries) {
            this.retryCount++;
            this.showStatus(`${reason} Retrying... (${this.retryCount}/${this.maxRetries})`, 2000);
            
            setTimeout(() => {
                if (!this.isSpeaking) {
                    this.startListening();
                }
            }, 1000);
        } else {
            this.updateUI('idle');
            this.showStatus('Having trouble hearing you. Please try again!', 4000);
        }
    }
    
    toggleVoiceChatbot() {
        if (!this.isSupported) {
            this.showUnsupportedMessage();
            return;
        }
        
        if (this.isSpeaking) {
            this.stopSpeaking();
            return;
        }
        
        if (this.isListening) {
            this.stopListening();
        } else {
            // Request microphone permission first on mobile
            if (this.isMobile) {
                this.requestMicrophonePermission().then(() => {
                    this.startListening();
                }).catch((error) => {
                    console.error('Microphone permission denied:', error);
                    this.showStatus('Microphone access required for voice chat!', 5000);
                });
            } else {
                this.startListening();
            }
        }
    }
    
    requestMicrophonePermission() {
        return new Promise((resolve, reject) => {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        // Stop the stream immediately - we just needed permission
                        stream.getTracks().forEach(track => track.stop());
                        resolve();
                    })
                    .catch(error => {
                        reject(error);
                    });
            } else {
                // Fallback - just try to start recognition
                resolve();
            }
        });
    }
    
    startListening() {
        // Stop any ongoing speech
        if (this.synthesis.speaking) {
            this.synthesis.cancel();
        }
        
        this.hideHelp();
        this.hideHistory();
        
        // Reset retry count for new session
        this.retryCount = 0;
        
        try {
            this.isListening = true;
            
            // iOS-specific workaround
            if (this.isIOS) {
                // On iOS, speech recognition must be triggered by user interaction
                // and we need to handle it more carefully
                setTimeout(() => {
                    if (this.recognition && this.isListening) {
                        this.recognition.start();
                    }
                }, 100);
            } else {
                this.recognition.start();
            }
        } catch (error) {
            console.error('Failed to start recognition:', error);
            this.isListening = false;
            
            if (error.name === 'InvalidStateError') {
                this.showStatus('Please wait before trying again...', 2000);
            } else {
                this.showStatus('Failed to start listening. Please try again!', 3000);
            }
        }
    }
    
    stopListening() {
        this.isListening = false;
        if (this.recognition) {
            try {
                this.recognition.stop();
            } catch (error) {
                console.error('Error stopping recognition:', error);
            }
        }
        this.updateUI('idle');
    }
    
    stopSpeaking() {
        if (this.synthesis.speaking) {
            this.synthesis.cancel();
        }
        this.isSpeaking = false;
        this.currentUtterance = null;
        this.updateUI('idle');
    }
    
    processVoiceQuestion(question) {
        console.log('Voice question received:', question);
        
        // Add to conversation history
        this.addToHistory(question, 'user');
        
        const lowerQuestion = question.toLowerCase();
        
        // Check for special commands first
        if (lowerQuestion.includes('show conversation') || lowerQuestion.includes('show history')) {
            this.showHistory();
            this.speak("Here's our conversation history");
            this.updateUI('idle');
            return;
        }
        
        if (lowerQuestion.includes('help') || lowerQuestion.includes('what can you do')) {
            this.showHelp();
            this.speak("I can answer questions about Ujjwal's background, experience, skills, education, and more. Just ask me anything!");
            this.updateUI('idle');
            return;
        }
        
        if (lowerQuestion.includes('stop') || lowerQuestion.includes('quit') || lowerQuestion.includes('bye')) {
            this.speak("Thanks for chatting! Click anytime to ask more questions.");
            this.addToHistory("Thanks for chatting! Click anytime to ask more questions.", 'bot');
            this.updateUI('idle');
            return;
        }
        
        // Use existing chatbot knowledge base
        const response = generateResponse(question);
        
        // Add response to history
        this.addToHistory(response, 'bot');
        
        // Speak the response
        this.speak(response);
        
        setTimeout(() => {
            this.updateUI('idle');
        }, 1000);
    }
    
    addToHistory(message, sender) {
        this.conversationHistory.push({
            message: message,
            sender: sender,
            timestamp: new Date()
        });
        
        // Keep only last 10 messages
        if (this.conversationHistory.length > 10) {
            this.conversationHistory = this.conversationHistory.slice(-10);
        }
        
        this.updateHistoryDisplay();
    }
    
    updateHistoryDisplay() {
        const container = document.getElementById('voiceMessages');
        if (!container) return;
        
        container.innerHTML = '';
        
        this.conversationHistory.forEach(item => {
            const messageDiv = document.createElement('div');
            messageDiv.className = `voice-message ${item.sender}`;
            
            // Truncate long messages for display
            let displayMessage = item.message;
            if (displayMessage.length > 100) {
                displayMessage = displayMessage.substring(0, 97) + '...';
            }
            
            messageDiv.textContent = displayMessage;
            container.appendChild(messageDiv);
        });
        
        // Scroll to bottom
        container.scrollTop = container.scrollHeight;
    }
    
    speak(text) {
        if (!text || text.trim().length === 0) {
            console.warn('No text to speak');
            this.updateUI('idle');
            return;
        }
        
        // Cancel any ongoing speech
        if (this.synthesis.speaking) {
            this.synthesis.cancel();
        }
        
        this.isSpeaking = true;
        this.updateUI('speaking');
        this.showStatus('Speaking...');
        
        // Clean and optimize text for speech
        let cleanText = this.cleanTextForSpeech(text);
        
        // iOS requires shorter utterances for reliable playback
        const maxLength = this.isIOS ? 150 : 200;
        const chunks = this.splitTextIntoChunks(cleanText, maxLength);
        
        this.speakChunks(chunks, 0);
    }
    
    cleanTextForSpeech(text) {
        return text
            // Remove markdown and formatting
            .replace(/\*\*/g, '')
            .replace(/\*/g, '')
            .replace(/`/g, '')
            .replace(/#{1,6}\s/g, '')
            .replace(/\[([^\]]+)\]\([^)]+\)/g, '$1')
            .replace(/\bML\b/g, 'Machine Learning')
            .replace(/\bAI\b/g, 'Artificial Intelligence')
            .replace(/\bAPI\b/g, 'A P I')
            .replace(/\bHTML\b/g, 'H T M L')
            .replace(/\bCSS\b/g, 'C S S')
            .replace(/\bJS\b/g, 'JavaScript')
            .replace(/\bCGPA\b/g, 'C G P A')
            .replace(/\bECE\b/g, 'Electronics and Communication Engineering')
            .replace(/\bRVCE\b/g, 'R V College of Engineering')
            .replace(/\bIFFCO\b/g, 'Indian Farmers Fertiliser Cooperative')
            // Clean up punctuation for better speech flow
            .replace(/([.!?])\s*([.!?])/g, '$1 ')
            .replace(/\s+/g, ' ')
            .trim();
    }
    
    splitTextIntoChunks(text, maxLength) {
        if (text.length <= maxLength) {
            return [text];
        }
        
        const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
        const chunks = [];
        let currentChunk = '';
        
        for (const sentence of sentences) {
            const trimmedSentence = sentence.trim();
            if (!trimmedSentence) continue;
            
            const potentialChunk = currentChunk 
                ? `${currentChunk}. ${trimmedSentence}`
                : trimmedSentence;
            
            if (potentialChunk.length > maxLength && currentChunk.length > 0) {
                chunks.push(currentChunk.trim() + '.');
                currentChunk = trimmedSentence;
            } else {
                currentChunk = potentialChunk;
            }
        }
        
        if (currentChunk.trim().length > 0) {
            chunks.push(currentChunk.trim() + (currentChunk.endsWith('.') ? '' : '.'));
        }
        
        return chunks.length > 0 ? chunks : [text];
    }
    
    speakChunks(chunks, index) {
        if (index >= chunks.length || !this.isSpeaking) {
            this.isSpeaking = false;
            this.updateUI('idle');
            this.hideStatus();
            return;
        }
        
        const text = chunks[index];
        console.log(`Speaking chunk ${index + 1}/${chunks.length}: "${text.substring(0, 50)}..."`);
        
        this.currentUtterance = new SpeechSynthesisUtterance(text);
        
        // Optimize settings for different platforms
        if (this.isIOS) {
            this.currentUtterance.rate = 0.85;
            this.currentUtterance.pitch = 1.0;
            this.currentUtterance.volume = 0.9;
        } else if (this.isMobile) {
            this.currentUtterance.rate = 0.9;
            this.currentUtterance.pitch = 1.0;
            this.currentUtterance.volume = 0.8;
        } else {
            this.currentUtterance.rate = 0.95;
            this.currentUtterance.pitch = 1.0;
            this.currentUtterance.volume = 0.8;
        }
        
        // Use preferred voice if available
        if (this.preferredVoice) {
            this.currentUtterance.voice = this.preferredVoice;
        }
        
        // Set up event handlers
        this.currentUtterance.onend = () => {
            console.log(`Finished speaking chunk ${index + 1}`);
            if (this.isSpeaking) {
                // Small delay between chunks for better mobile experience
                setTimeout(() => {
                    this.speakChunks(chunks, index + 1);
                }, this.isMobile ? 200 : 100);
            }
        };
        
        this.currentUtterance.onerror = (event) => {
            console.error('Speech synthesis error:', event);
            
            // Try to recover on mobile devices
            if (this.isMobile && index === 0) {
                setTimeout(() => {
                    if (this.isSpeaking) {
                        this.speakChunks(chunks, index);
                    }
                }, 300);
            } else {
                this.isSpeaking = false;
                this.updateUI('idle');
                this.showStatus('Speech playback error. The response was processed successfully.', 3000);
            }
        };
        
        this.currentUtterance.onstart = () => {
            console.log(`Started speaking chunk ${index + 1}`);
        };
        
        // Start speaking
        try {
            this.synthesis.speak(this.currentUtterance);
        } catch (error) {
            console.error('Failed to start speech synthesis:', error);
            this.isSpeaking = false;
            this.updateUI('idle');
            this.showStatus('Unable to speak response, but I understood your question!', 3000);
        }
    }
    
    updateUI(state) {
        const toggle = document.getElementById('voiceChatbotToggle');
        const icon = document.getElementById('voiceChatbotIcon');
        
        if (!toggle || !icon) return;
        
        toggle.classList.remove('listening', 'processing', 'speaking');
        
        switch (state) {
            case 'listening':
                toggle.classList.add('listening');
                icon.className = 'fas fa-microphone-slash';
                toggle.setAttribute('aria-pressed', 'true');
                break;
            case 'processing':
                toggle.classList.add('processing');
                icon.className = 'fas fa-cog';
                toggle.setAttribute('aria-pressed', 'true');
                break;
            case 'speaking':
                toggle.classList.add('speaking');
                icon.className = 'fas fa-volume-up';
                toggle.setAttribute('aria-pressed', 'true');
                break;
            default:
                icon.className = 'fas fa-microphone';
                toggle.setAttribute('aria-pressed', 'false');
                this.hideStatus();
        }
    }
    
    showStatus(message, duration = 5000) {
        const status = document.getElementById('voiceStatusBubble');
        if (!status) return;
        
        status.textContent = message;
        status.classList.add('show');
        
        if (duration > 0) {
            setTimeout(() => this.hideStatus(), duration);
        }
    }
    
    hideStatus() {
        const status = document.getElementById('voiceStatusBubble');
        if (status) {
            status.classList.remove('show');
        }
    }
    
    showHelp() {
        this.hideHistory();
        const help = document.getElementById('voiceHelpPanel');
        if (help) {
            help.classList.add('show');
            this.helpVisible = true;
            
            setTimeout(() => {
                this.hideHelp();
            }, 8000);
        }
    }
    
    hideHelp() {
        const help = document.getElementById('voiceHelpPanel');
        if (help) {
            help.classList.remove('show');
            this.helpVisible = false;
        }
    }
    
    showHistory() {
        this.hideHelp();
        const history = document.getElementById('voiceConversationHistory');
        if (history) {
            history.classList.add('show');
            this.historyVisible = true;
            
            setTimeout(() => {
                this.hideHistory();
            }, 10000);
        }
    }
    
    hideHistory() {
        const history = document.getElementById('voiceConversationHistory');
        if (history) {
            history.classList.remove('show');
            this.historyVisible = false;
        }
    }
    
    showUnsupportedMessage() {
        const supportInfo = this.getSupportInfo();
        this.showStatus(supportInfo.message, 8000);
        
        // Update button to show unsupported state
        const toggle = document.getElementById('voiceChatbotToggle');
        const icon = document.getElementById('voiceChatbotIcon');
        
        if (toggle && icon) {
            toggle.style.background = 'linear-gradient(45deg, #666, #555)';
            icon.className = 'fas fa-microphone-slash';
            toggle.setAttribute('aria-label', 'Voice chat not supported');
        }
        
        console.warn('Voice chat not supported:', supportInfo.details);
    }
    
    getSupportInfo() {
        const hasRecognition = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
        const hasSynthesis = 'speechSynthesis' in window;
        
        if (!hasRecognition && !hasSynthesis) {
            return {
                message: 'Voice chat not supported in this browser. Try Chrome, Safari, or Edge.',
                details: 'Neither speech recognition nor synthesis available'
            };
        }
        
        if (!hasRecognition) {
            return {
                message: 'Voice input not supported. You can still interact with the text chatbot below.',
                details: 'Speech recognition not available'
            };
        }
        
        if (!hasSynthesis) {
            return {
                message: 'Voice responses not supported, but I can listen to you!',
                details: 'Speech synthesis not available'
            };
        }
        
        return {
            message: 'Voice features should be supported. Please check microphone permissions.',
            details: 'APIs available but may have permission issues'
        };
    }
}

// Initialize voice chatbot with better error handling
let voiceChatbot;

function toggleVoiceChatbot() {
    try {
        if (!voiceChatbot) {
            voiceChatbot = new VoiceChatbot();
        }
        voiceChatbot.toggleVoiceChatbot();
    } catch (error) {
        console.error('Voice chatbot initialization error:', error);
        
        // Fallback: show manual message
        const statusBubble = document.getElementById('voiceStatusBubble');
        if (statusBubble) {
            statusBubble.textContent = 'Voice chat unavailable. Try the text chatbot below!';
            statusBubble.classList.add('show');
            setTimeout(() => statusBubble.classList.remove('show'), 5000);
        }
    }
}

// Enhanced initialization
document.addEventListener('DOMContentLoaded', function() {
    // Initialize voices for better speech synthesis
    if ('speechSynthesis' in window) {
        const initVoices = () => {
            const voices = speechSynthesis.getVoices();
            console.log('Available voices:', voices.length);
            
            if (voices.length === 0) {
                setTimeout(initVoices, 100);
            }
        };
        
        speechSynthesis.addEventListener('voiceschanged', initVoices);
        initVoices();
    }
    
    // Add accessibility attributes
    const voiceToggle = document.getElementById('voiceChatbotToggle');
    if (voiceToggle) {
        voiceToggle.setAttribute('aria-label', 'Toggle voice chat');
        voiceToggle.setAttribute('role', 'button');
        voiceToggle.setAttribute('aria-pressed', 'false');
    }
});

// Enhanced cleanup on page unload
window.addEventListener('beforeunload', function() {
    if (voiceChatbot) {
        try {
            voiceChatbot.stopListening();
            voiceChatbot.stopSpeaking();
        } catch (error) {
            console.error('Cleanup error:', error);
        }
    }
});

// Handle page visibility changes
document.addEventListener('visibilitychange', function() {
    if (document.hidden && voiceChatbot) {
        try {
            voiceChatbot.stopListening();
            voiceChatbot.stopSpeaking();
        } catch (error) {
            console.error('Visibility change cleanup error:', error);
        }
    }
});
// GitHub API Integration
const GITHUB_USERNAME = 'Ujjwal120605';
const GITHUB_API_BASE = 'https://api.github.com';

// Language color mapping
const languageColors = {
    'JavaScript': '#f7df1e',
    'Python': '#3776ab',
    'HTML': '#e34f26',
    'CSS': '#1572b6',
    'C++': '#00599c',
    'C': '#a8b9cc',
    'Java': '#ed8b00',
    'TypeScript': '#3178c6',
    'MATLAB': '#0076a8'
};

// Fetch GitHub user data
async function fetchGitHubData() {
    try {
        const userResponse = await fetch(`${GITHUB_API_BASE}/users/${GITHUB_USERNAME}`);
        const userData = await userResponse.json();
        
        const reposResponse = await fetch(`${GITHUB_API_BASE}/users/${GITHUB_USERNAME}/repos?sort=stars&direction=desc&per_page=6`);
        const reposData = await reposResponse.json();
        
        updateGitHubStats(userData, reposData);
        updateRepositories(reposData);
        
    } catch (error) {
        console.error('Error fetching GitHub data:', error);
        showGitHubError();
    }
}

function updateGitHubStats(userData, reposData) {
    document.getElementById('totalRepos').textContent = userData.public_repos || 0;
    document.getElementById('followers').textContent = userData.followers || 0;
    
    const totalStars = reposData.reduce((sum, repo) => sum + repo.stargazers_count, 0);
    document.getElementById('totalStars').textContent = totalStars;
    document.getElementById('totalCommits').textContent = '500+';
}

function updateRepositories(repos) {
    const container = document.getElementById('topRepos');
    container.innerHTML = '';
    
    const filteredRepos = repos.filter(repo => !repo.fork).slice(0, 6);
    
    filteredRepos.forEach(repo => {
        const repoCard = createRepositoryCard(repo);
        container.appendChild(repoCard);
    });
}

function createRepositoryCard(repo) {
    const card = document.createElement('div');
    card.className = 'repo-card';
    
    const language = repo.language || 'Text';
    const languageColor = languageColors[language] || '#666';
    
    card.innerHTML = `
        <div class="repo-header">
            <div class="repo-icon">
                <i class="fas fa-folder-open"></i>
            </div>
            <div class="repo-info">
                <h4>${repo.name}</h4>
                <p>${repo.description || 'No description available.'}</p>
            </div>
        </div>
        
        <div class="repo-meta">
            <div class="repo-language">
                <span class="language-dot" style="background: ${languageColor}"></span>
                ${language}
            </div>
            
            <div class="repo-stats">
                <div class="repo-stat">
                    <i class="fas fa-star"></i>
                    ${repo.stargazers_count}
                </div>
                <div class="repo-stat">
                    <i class="fas fa-code-branch"></i>
                    ${repo.forks_count}
                </div>
            </div>
        </div>
        
        <div class="repo-links">
            <a href="${repo.html_url}" target="_blank" class="repo-link primary">
                <i class="fab fa-github"></i>
                View Code
            </a>
            ${repo.homepage ? `<a href="${repo.homepage}" target="_blank" class="repo-link secondary">
                <i class="fas fa-external-link-alt"></i>
                Live Demo
            </a>` : ''}
        </div>
    `;
    
    return card;
}

function generateActivityGrid() {
    const container = document.getElementById('activityGrid');
    const summaryElement = document.getElementById('activitySummary');
    
    // Clear existing content
    container.innerHTML = '';
    
    const weeks = 53;
    const daysPerWeek = 7;
    let totalContributions = 0;
    let streakDays = 0;
    let currentStreak = 0;
    let maxStreak = 0;
    
    // Generate activity data for the past year
    for (let week = 0; week < weeks; week++) {
        for (let day = 0; day < daysPerWeek; day++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'activity-day';
            
            // Create more realistic activity pattern
            const isWeekend = day === 0 || day === 6;
            const isRecentWeek = week > 40; // More activity in recent weeks
            const isHoliday = Math.random() < 0.1; // 10% chance of being a holiday/break
            
            let activityChance;
            if (isHoliday) {
                activityChance = 0.1; // Low activity during holidays
            } else if (isWeekend) {
                activityChance = 0.4; // Moderate weekend activity
            } else if (isRecentWeek) {
                activityChance = 0.8; // High recent activity
            } else {
                activityChance = 0.6; // Normal weekday activity
            }
            
            const hasActivity = Math.random() < activityChance;
            
            if (hasActivity) {
                const intensity = Math.random();
                let level;
                let contributions;
                
                if (intensity < 0.4) {
                    level = 1;
                    contributions = Math.floor(Math.random() * 3) + 1; // 1-3
                } else if (intensity < 0.7) {
                    level = 2;
                    contributions = Math.floor(Math.random() * 5) + 4; // 4-8
                } else if (intensity < 0.9) {
                    level = 3;
                    contributions = Math.floor(Math.random() * 7) + 9; // 9-15
                } else {
                    level = 4;
                    contributions = Math.floor(Math.random() * 10) + 16; // 16-25
                }
                
                dayElement.classList.add(`active-${level}`);
                totalContributions += contributions;
                currentStreak++;
                
                // Tooltip with contribution count
                dayElement.title = `${contributions} contribution${contributions !== 1 ? 's' : ''} on this day`;
            } else {
                dayElement.title = 'No contributions on this day';
                maxStreak = Math.max(maxStreak, currentStreak);
                currentStreak = 0;
            }
            
            // Add hover effect with date info
            const today = new Date();
            const dayDate = new Date(today.getTime() - (weeks - week - 1) * 7 * 24 * 60 * 60 * 1000 - (6 - day) * 24 * 60 * 60 * 1000);
            const dateString = dayDate.toLocaleDateString('en-US', { 
                weekday: 'short', 
                month: 'short', 
                day: 'numeric' 
            });
            
            const originalTitle = dayElement.title;
            dayElement.title = `${originalTitle} - ${dateString}`;
            
            container.appendChild(dayElement);
        }
    }
    
    // Final streak calculation
    maxStreak = Math.max(maxStreak, currentStreak);
    
    // Update summary
    const avgPerDay = (totalContributions / 365).toFixed(1);
    summaryElement.innerHTML = `
        <strong>${totalContributions}</strong> contributions in the past year • 
        <strong>${avgPerDay}</strong> per day average • 
        <strong>${maxStreak}</strong> day longest streak
    `;
}

// Initialize GitHub dashboard
document.addEventListener('DOMContentLoaded', function() {
    fetchGitHubData();
    generateActivityGrid();
});
// Project data with background images/gradients
// Enhanced Project data with better backgrounds and more variety
// Enhanced Project data
// Enhanced project data for stack cards
const projectsData = [
    {
        id: 'portfolio-site',
        title: 'Personal Portfolio',
        subtitle: 'Web Development',
        description: 'A fully responsive personal resume website built with modern HTML5, CSS3, and vanilla JavaScript. Features include smooth animations, downloadable PDF resume, interactive sections, and optimized performance across all devices.',
        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        icon: 'fas fa-globe',
        tech: ['HTML5', 'CSS3', 'JavaScript', 'Responsive Design'],
        links: [
            { type: 'github', url: 'https://github.com/Ujjwal120605/CV', text: 'View Code' },
            { type: 'demo', url: 'https://cv-seven-puce.vercel.app/', text: 'Live Demo' }
        ]
    },
    {
        id: 'crop-mapping',
        title: 'Hyperspectral Crop Mapping',
        subtitle: 'Machine Learning',
        description: 'Advanced deep learning project for precision agriculture using hyperspectral satellite imagery. Implemented CNN architectures for crop classification with high accuracy.',
        background: 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)',
        icon: 'fas fa-seedling',
        tech: ['Python', 'TensorFlow', 'CNN', 'Remote Sensing'],
        links: []
    },
    {
        id: 'iffco-website',
        title: 'IFFCO Information Portal',
        subtitle: 'Full Stack Development',
        description: 'Enterprise-level web application developed during internship at IFFCO. Features secure authentication system, dynamic content management, and responsive design.',
        background: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
        icon: 'fas fa-building',
        tech: ['HTML5', 'CSS3', 'JavaScript', 'JSON', 'Authentication'],
        links: [
            { type: 'github', url: 'https://github.com/Ujjwal120605/iffco_project', text: 'View Code' },
            { type: 'demo', url: 'https://iffco-project.vercel.app/', text: 'Live Demo' }
        ]
    },
    {
        id: 'metaverse-site',
        title: 'Metaverse Website',
        subtitle: 'Modern Web Development',
        description: 'Cutting-edge Next.js application showcasing modern web development practices. Built with React hooks, Tailwind CSS, and optimized for performance.',
        background: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
        icon: 'fas fa-vr-cardboard',
        tech: ['Next.js', 'React', 'Tailwind CSS', 'JavaScript'],
        links: [
            { type: 'github', url: 'https://github.com/Ujjwal120605/metaverse-website', text: 'View Code' },
            { type: 'demo', url: 'https://metaverse-website-mocha.vercel.app/', text: 'Live Demo' }
        ]
    },
    {
        id: 'noise-cancellation',
        title: 'Cognitive Noise Cancellation',
        subtitle: 'Audio Processing & ML',
        description: 'Sophisticated machine learning pipeline for real-time audio enhancement. Uses advanced signal processing techniques and deep learning models.',
        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        icon: 'fas fa-volume-mute',
        tech: ['Python', 'Signal Processing', 'Deep Learning', 'Audio Analysis'],
        links: [
            { type: 'github', url: 'https://github.com/Ujjwal120605/CognitiveNoiseCancellation', text: 'View Code' }
        ]
    }
];

// Simplified project management class with mobile optimization
class ProjectManager {
    constructor() {
        this.container = document.getElementById('projectsShowcase');
        this.activeProject = null;
        this.isMobile = this.detectMobile();
        this.init();
        this.setupResizeListener();
    }
    
    detectMobile() {
        return window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    
    init() {
        if (!this.container) return;
        
        this.container.innerHTML = '';
        
        if (this.isMobile) {
            this.initMobileLayout();
        } else {
            this.initDesktopLayout();
        }
    }
    
    initMobileLayout() {
        // Simple mobile layout - no complex interactions
        projectsData.forEach(project => {
            const card = this.createMobileProjectCard(project);
            this.container.appendChild(card);
        });
        
        // Add simple click handlers for mobile
        this.setupMobileEventListeners();
    }
    
    initDesktopLayout() {
        // Complex desktop layout with animations
        this.activeProject = projectsData[0].id;
        
        projectsData.forEach((project, index) => {
            const card = this.createDesktopProjectCard(project, index === 0);
            this.container.appendChild(card);
        });
        
        this.setupDesktopEventListeners();
    }
    
    createMobileProjectCard(project) {
        const card = document.createElement('div');
        card.className = 'mobile-project-card';
        card.setAttribute('data-project-id', project.id);
        
        const linksHTML = project.links.length > 0 ? `
            <div class="mobile-project-links">
                ${project.links.map(link => `
                    <a href="${link.url}" target="_blank" rel="noopener noreferrer" 
                       class="mobile-project-link ${link.type === 'github' ? 'secondary' : 'primary'}">
                        <i class="fas ${link.type === 'github' ? 'fa-code' : 'fa-external-link-alt'}"></i>
                        ${link.text}
                    </a>
                `).join('')}
            </div>
        ` : '';
        
        card.innerHTML = `
            <div class="mobile-project-background" style="background: ${project.background}"></div>
            <div class="mobile-project-content">
                <div class="mobile-project-header">
                    <div class="mobile-project-icon">
                        <i class="${project.icon}"></i>
                    </div>
                    <div class="mobile-project-info">
                        <p class="mobile-project-subtitle">${project.subtitle}</p>
                        <h3 class="mobile-project-title">${project.title}</h3>
                    </div>
                </div>
                
                <p class="mobile-project-description">${project.description}</p>
                
                <div class="mobile-project-tech">
                    ${project.tech.map(tech => `<span class="mobile-tech-tag">${tech}</span>`).join('')}
                </div>
                
                ${linksHTML}
            </div>
        `;
        
        return card;
    }
    
    createDesktopProjectCard(project, isActive = false) {
        const card = document.createElement('div');
        card.className = `animated-project-card ${isActive ? 'active' : ''}`;
        card.setAttribute('data-project-id', project.id);
        card.setAttribute('role', 'button');
        card.setAttribute('tabindex', '0');
        
        const background = document.createElement('div');
        background.className = 'project-background';
        background.style.background = project.background;
        
        const verticalTitle = document.createElement('h3');
        verticalTitle.className = 'project-title-vertical';
        verticalTitle.textContent = project.title;
        
        const expandedContent = document.createElement('div');
        expandedContent.className = 'project-content-expanded';
        expandedContent.innerHTML = this.createExpandedContent(project);
        
        card.appendChild(background);
        card.appendChild(verticalTitle);
        card.appendChild(expandedContent);
        
        return card;
    }
    
    createExpandedContent(project) {
        const linksHTML = project.links.length > 0 ? `
            <div class="project-links-animated">
                ${project.links.map(link => `
                    <a href="${link.url}" target="_blank" rel="noopener noreferrer" 
                       class="project-link-animated ${link.type === 'github' ? 'project-link-secondary' : 'project-link-primary'}"
                       onclick="event.stopPropagation()">
                        <i class="fas ${link.type === 'github' ? 'fa-code' : 'fa-external-link-alt'}"></i>
                        ${link.text}
                    </a>
                `).join('')}
            </div>
        ` : '';
        
        return `
            <div class="project-icon-container">
                <i class="${project.icon}" style="color: #00bcd4; font-size: 1.5rem;"></i>
            </div>
            <p class="project-subtitle">${project.subtitle}</p>
            <h2 class="project-main-title">${project.title}</h2>
            <p class="project-description-text">${project.description}</p>
            <div class="project-tech-tags">
                ${project.tech.map(tech => `<span class="tech-tag-animated">${tech}</span>`).join('')}
            </div>
            ${linksHTML}
        `;
    }
    
    setupMobileEventListeners() {
        // Simple mobile interactions - just handle link clicks
        const links = this.container.querySelectorAll('.mobile-project-link');
        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.stopPropagation();
                // Link will open normally
            });
        });
    }
    
    setupDesktopEventListeners() {
        const cards = this.container.querySelectorAll('.animated-project-card');
        
        cards.forEach(card => {
            // Remove existing listeners
            const newCard = card.cloneNode(true);
            card.parentNode.replaceChild(newCard, card);
        });
        
        // Re-select and add listeners
        const freshCards = this.container.querySelectorAll('.animated-project-card');
        freshCards.forEach(card => {
            card.addEventListener('click', (e) => this.handleDesktopCardClick(e, card));
            
            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.handleDesktopCardClick(e, card);
                }
            });
        });
    }
    
    handleDesktopCardClick(e, card) {
        e.preventDefault();
        e.stopPropagation();
        
        const clickedId = card.getAttribute('data-project-id');
        
        if (e.target.closest('a')) {
            return;
        }
        
        if (clickedId === this.activeProject) {
            this.closeAllCards();
            return;
        }
        
        this.activateDesktopCard(clickedId);
    }
    
    activateDesktopCard(projectId) {
        const cards = this.container.querySelectorAll('.animated-project-card');
        
        cards.forEach(card => {
            const cardId = card.getAttribute('data-project-id');
            if (cardId === projectId) {
                card.classList.add('active');
                this.activeProject = projectId;
            } else {
                card.classList.remove('active');
            }
        });
    }
    
    closeAllCards() {
        const cards = this.container.querySelectorAll('.animated-project-card');
        cards.forEach(card => card.classList.remove('active'));
        this.activeProject = null;
    }
    
    setupResizeListener() {
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                const wasMobile = this.isMobile;
                this.isMobile = this.detectMobile();
                
                if (wasMobile !== this.isMobile) {
                    this.init();
                }
            }, 300);
        });
    }
}

// Initialize project manager
let projectManager;

document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        if (document.getElementById('projectsShowcase')) {
            projectManager = new ProjectManager();
        }
    }, 100);
});

// Handle visibility change
document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
        document.body.style.setProperty('--animation-play-state', 'paused');
    } else {
        document.body.style.setProperty('--animation-play-state', 'running');
    }
});
/**
 * Enhanced Certificates Interactive Features
 * Optimized for both desktop and mobile devices
 */

 class CertificateEnhancer {
    constructor() {
        this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        this.touchDevice = ('ontouchstart' in window);
        this.certificateCards = [];
        this.modal = null;
        this.currentCertIndex = 0;
        
        this.init();
    }
    
    init() {
        this.enhanceCertificateStructure();
        this.setupInteractiveFeatures();
        this.setupKeyboardNavigation();
        this.setupMobileOptimizations();
        this.createEnhancedModal();
        
        if (this.isMobile) {
            this.setupTouchEffects();
        }
    }
    
    enhanceCertificateStructure() {
        const certCards = document.querySelectorAll('.cert-card');
        
        certCards.forEach((card, index) => {
            // Store original structure
            const title = card.querySelector('h4');
            const description = card.querySelector('p');
            const image = card.querySelector('.cert-image');
            
            if (!title || !description || !image) return;
            
            // Create enhanced structure
            const content = document.createElement('div');
            content.className = 'cert-content';
            
            const imageContainer = document.createElement('div');
            imageContainer.className = 'cert-image-container';
            
            const titleElement = document.createElement('div');
            titleElement.className = 'cert-title';
            titleElement.textContent = title.textContent;
            
            const descElement = document.createElement('div');
            descElement.className = 'cert-description';
            descElement.textContent = description.textContent;
            
            // Move image to container
            imageContainer.appendChild(image);
            
            // Build new structure
            content.appendChild(imageContainer);
            content.appendChild(titleElement);
            content.appendChild(descElement);
            
            // Replace card content
            card.innerHTML = '';
            card.appendChild(content);
            
            // Add data attributes
            card.setAttribute('data-cert-index', index);
            card.setAttribute('tabindex', '0');
            card.setAttribute('role', 'button');
            card.setAttribute('aria-label', `View ${title.textContent} certificate`);
            
            this.certificateCards.push({
                element: card,
                title: title.textContent,
                description: description.textContent,
                imageSrc: image.src,
                index: index
            });
        });
    }
    
    setupInteractiveFeatures() {
        this.certificateCards.forEach((cert) => {
            const card = cert.element;
            
            // Click/Touch events
            card.addEventListener('click', (e) => this.handleCardClick(e, cert));
            
            // Mouse events for desktop
            if (!this.touchDevice) {
                card.addEventListener('mouseenter', (e) => this.handleMouseEnter(e, cert));
                card.addEventListener('mouseleave', (e) => this.handleMouseLeave(e, cert));
                card.addEventListener('mousemove', (e) => this.handleMouseMove(e, cert));
            }
            
            // Focus events
            card.addEventListener('focus', (e) => this.handleFocus(e, cert));
            card.addEventListener('blur', (e) => this.handleBlur(e, cert));
        });
    }
    
    setupTouchEffects() {
        this.certificateCards.forEach((cert) => {
            const card = cert.element;
            
            card.addEventListener('touchstart', (e) => this.handleTouchStart(e, cert), { passive: true });
            card.addEventListener('touchend', (e) => this.handleTouchEnd(e, cert), { passive: true });
            card.addEventListener('touchmove', (e) => this.handleTouchMove(e, cert), { passive: true });
        });
    }
    
    handleCardClick(e, cert) {
        e.preventDefault();
        this.addRippleEffect(e, cert.element);
        this.openEnhancedModal(cert);
    }
    
    handleMouseEnter(e, cert) {
        this.addHoverEffects(cert.element);
    }
    
    handleMouseLeave(e, cert) {
        this.removeHoverEffects(cert.element);
    }
    
    handleMouseMove(e, cert) {
        if (!this.isMobile) {
            this.add3DEffect(e, cert.element);
        }
    }
    
    handleTouchStart(e, cert) {
        const card = cert.element;
        card.classList.add('touch-active');
        
        this.addRippleEffect(e, card);
        
        // Haptic feedback if available
        if (navigator.vibrate) {
            navigator.vibrate(10);
        }
    }
    
    handleTouchEnd(e, cert) {
        const card = cert.element;
        
        setTimeout(() => {
            card.classList.remove('touch-active');
        }, 150);
    }
    
    handleTouchMove(e, cert) {
        // Prevent default to avoid scrolling issues
        if (e.touches.length === 1) {
            const card = cert.element;
            const touch = e.touches[0];
            const rect = card.getBoundingClientRect();
            
            if (touch.clientX < rect.left || touch.clientX > rect.right ||
                touch.clientY < rect.top || touch.clientY > rect.bottom) {
                card.classList.remove('touch-active');
            }
        }
    }
    
    handleFocus(e, cert) {
        this.addHoverEffects(cert.element);
    }
    
    handleBlur(e, cert) {
        this.removeHoverEffects(cert.element);
    }
    
    addRippleEffect(e, card) {
        const ripple = document.createElement('div');
        const rect = card.getBoundingClientRect();
        
        let x, y;
        
        if (e.type === 'touchstart') {
            x = e.touches[0].clientX - rect.left;
            y = e.touches[0].clientY - rect.top;
        } else {
            x = e.clientX - rect.left;
            y = e.clientY - rect.top;
        }
        
        const size = Math.max(rect.width, rect.height);
        
        ripple.style.cssText = `
            position: absolute;
            border-radius: 50%;
            background: rgba(0, 188, 212, 0.3);
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            left: ${x - size/2}px;
            top: ${y - size/2}px;
            width: ${size}px;
            height: ${size}px;
            pointer-events: none;
            z-index: 10;
        `;
        
        // Add ripple animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(2);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        
        card.style.position = 'relative';
        card.appendChild(ripple);
        
        setTimeout(() => {
            if (ripple.parentNode) {
                ripple.parentNode.removeChild(ripple);
            }
        }, 600);
    }
    
    add3DEffect(e, card) {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        
        const rotateX = (y - centerY) / centerY * -10;
        const rotateY = (x - centerX) / centerX * 10;
        
        card.style.transform = `
            translateY(-15px) 
            rotateX(${rotateX}deg) 
            rotateY(${rotateY}deg) 
            scale(1.02)
        `;
    }
    
    addHoverEffects(card) {
        // Add any additional hover effects here
        card.style.transition = 'all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
    }
    
    removeHoverEffects(card) {
        if (!this.isMobile) {
            card.style.transform = '';
        }
    }
    
    createEnhancedModal() {
        // Remove existing modal if present
        const existingModal = document.getElementById('certModal');
        if (existingModal) {
            existingModal.remove();
        }
        
        this.modal = document.createElement('div');
        this.modal.id = 'enhancedCertModal';
        this.modal.className = 'enhanced-cert-modal';
        this.modal.innerHTML = `
            <div class="modal-backdrop"></div>
            <div class="modal-content-wrapper">
                <div class="modal-header">
                    <button class="modal-close" aria-label="Close modal">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="modal-nav">
                        <button class="modal-prev" aria-label="Previous certificate">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span class="modal-counter">1 of ${this.certificateCards.length}</span>
                        <button class="modal-next" aria-label="Next certificate">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal-image-container">
                        <img class="modal-image" src="" alt="" />
                        <div class="modal-zoom-controls">
                            <button class="zoom-in" aria-label="Zoom in">
                                <i class="fas fa-search-plus"></i>
                            </button>
                            <button class="zoom-out" aria-label="Zoom out">
                                <i class="fas fa-search-minus"></i>
                            </button>
                            <button class="zoom-reset" aria-label="Reset zoom">
                                <i class="fas fa-compress-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="modal-info">
                        <h3 class="modal-title"></h3>
                        <p class="modal-description"></p>
                        <div class="modal-actions">
                            <button class="modal-download">
                                <i class="fas fa-download"></i>
                                Download
                            </button>
                            <button class="modal-share">
                                <i class="fas fa-share-alt"></i>
                                Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.body.appendChild(this.modal);
        this.setupModalEvents();
        this.addModalStyles();
    }
    
    setupModalEvents() {
        const modal = this.modal;
        const closeBtn = modal.querySelector('.modal-close');
        const backdrop = modal.querySelector('.modal-backdrop');
        const prevBtn = modal.querySelector('.modal-prev');
        const nextBtn = modal.querySelector('.modal-next');
        const zoomIn = modal.querySelector('.zoom-in');
        const zoomOut = modal.querySelector('.zoom-out');
        const zoomReset = modal.querySelector('.zoom-reset');
        
        closeBtn.addEventListener('click', () => this.closeModal());
        backdrop.addEventListener('click', () => this.closeModal());
        prevBtn.addEventListener('click', () => this.showPrevCertificate());
        nextBtn.addEventListener('click', () => this.showNextCertificate());
        
        // Zoom controls
        let zoomLevel = 1;
        const image = modal.querySelector('.modal-image');
        
        zoomIn.addEventListener('click', () => {
            zoomLevel = Math.min(zoomLevel * 1.2, 3);
            image.style.transform = `scale(${zoomLevel})`;
        });
        
        zoomOut.addEventListener('click', () => {
            zoomLevel = Math.max(zoomLevel / 1.2, 0.5);
            image.style.transform = `scale(${zoomLevel})`;
        });
        
        zoomReset.addEventListener('click', () => {
            zoomLevel = 1;
            image.style.transform = 'scale(1)';
        });
        
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (modal.classList.contains('show')) {
                switch(e.key) {
                    case 'Escape':
                        this.closeModal();
                        break;
                    case 'ArrowLeft':
                        this.showPrevCertificate();
                        break;
                    case 'ArrowRight':
                        this.showNextCertificate();
                        break;
                }
            }
        });
        
        // Touch/swipe support for mobile
        if (this.touchDevice) {
            this.setupModalSwipe();
        }
    }
    
    setupModalSwipe() {
        const modalBody = this.modal.querySelector('.modal-body');
        let startX = 0;
        let startY = 0;
        
        modalBody.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
        }, { passive: true });
        
        modalBody.addEventListener('touchend', (e) => {
            const endX = e.changedTouches[0].clientX;
            const endY = e.changedTouches[0].clientY;
            
            const diffX = startX - endX;
            const diffY = startY - endY;
            
            // Only trigger swipe if horizontal movement is greater than vertical
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                if (diffX > 0) {
                    this.showNextCertificate();
                } else {
                    this.showPrevCertificate();
                }
            }
        }, { passive: true });
    }
    
    openEnhancedModal(cert) {
        this.currentCertIndex = cert.index;
        this.updateModalContent(cert);
        this.modal.classList.add('show');
        document.body.style.overflow = 'hidden';
        
        // Focus management
        const closeBtn = this.modal.querySelector('.modal-close');
        setTimeout(() => closeBtn.focus(), 100);
    }
    
    closeModal() {
        this.modal.classList.remove('show');
        document.body.style.overflow = '';
        
        // Return focus to the certificate card
        const currentCard = this.certificateCards[this.currentCertIndex];
        if (currentCard) {
            currentCard.element.focus();
        }
    }
    
    showPrevCertificate() {
        this.currentCertIndex = (this.currentCertIndex - 1 + this.certificateCards.length) % this.certificateCards.length;
        const cert = this.certificateCards[this.currentCertIndex];
        this.updateModalContent(cert);
    }
    
    showNextCertificate() {
        this.currentCertIndex = (this.currentCertIndex + 1) % this.certificateCards.length;
        const cert = this.certificateCards[this.currentCertIndex];
        this.updateModalContent(cert);
    }
    
    updateModalContent(cert) {
        const modal = this.modal;
        const image = modal.querySelector('.modal-image');
        const title = modal.querySelector('.modal-title');
        const description = modal.querySelector('.modal-description');
        const counter = modal.querySelector('.modal-counter');
        
        image.src = cert.imageSrc;
        image.alt = cert.title;
        title.textContent = cert.title;
        description.textContent = cert.description;
        counter.textContent = `${cert.index + 1} of ${this.certificateCards.length}`;
        
        // Reset zoom
        image.style.transform = 'scale(1)';
    }
    
    setupKeyboardNavigation() {
        document.addEventListener('keydown', (e) => {
            if (e.target.classList.contains('cert-card')) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    e.target.click();
                }
            }
        });
    }
    
    setupMobileOptimizations() {
        if (this.isMobile) {
            // Add CSS class for mobile-specific styles
            document.body.classList.add('mobile-certs');
            
            // Intersection Observer for animation on scroll
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, { threshold: 0.1 });
            
            this.certificateCards.forEach(cert => {
                observer.observe(cert.element);
            });
        }
    }
    
    addModalStyles() {
        const style = document.createElement('style');
        style.textContent = `
            .enhanced-cert-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                backdrop-filter: blur(10px);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .enhanced-cert-modal.show {
                opacity: 1;
                visibility: visible;
            }
            
            .modal-backdrop {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }
            
            .modal-content-wrapper {
                position: relative;
                max-width: 90vw;
                max-height: 90vh;
                background: linear-gradient(145deg, rgba(30, 30, 30, 0.95), rgba(15, 15, 15, 0.95));
                border-radius: 20px;
                border: 1px solid rgba(0, 188, 212, 0.3);
                backdrop-filter: blur(20px);
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
                transform: scale(0.8) translateY(50px);
                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                overflow: hidden;
            }
            
            .enhanced-cert-modal.show .modal-content-wrapper {
                transform: scale(1) translateY(0);
            }
            
            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1.5rem 2rem;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                background: linear-gradient(90deg, rgba(0, 188, 212, 0.1), rgba(255, 107, 107, 0.1));
            }
            
            .modal-close {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .modal-close:hover {
                background: rgba(255, 107, 107, 0.3);
                transform: scale(1.1);
            }
            
            .modal-nav {
                display: flex;
                align-items: center;
                gap: 1rem;
                color: white;
            }
            
            .modal-prev, .modal-next {
                background: rgba(0, 188, 212, 0.2);
                border: 1px solid rgba(0, 188, 212, 0.3);
                color: #00bcd4;
                width: 35px;
                height: 35px;
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .modal-prev:hover, .modal-next:hover {
                background: rgba(0, 188, 212, 0.4);
                transform: scale(1.1);
            }
            
            .modal-counter {
                font-size: 0.9rem;
                color: #aaa;
                min-width: 80px;
                text-align: center;
            }
            
            .modal-body {
                display: grid;
                grid-template-columns: 1fr 300px;
                gap: 2rem;
                padding: 2rem;
                min-height: 500px;
            }
            
            .modal-image-container {
                position: relative;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 15px;
                overflow: hidden;
            }
            
            .modal-image {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                transition: transform 0.3s ease;
                cursor: grab;
            }
            
            .modal-image:active {
                cursor: grabbing;
            }
            
            .modal-zoom-controls {
                position: absolute;
                bottom: 1rem;
                right: 1rem;
                display: flex;
                gap: 0.5rem;
                background: rgba(0, 0, 0, 0.7);
                border-radius: 25px;
                padding: 0.5rem;
            }
            
            .zoom-in, .zoom-out, .zoom-reset {
                background: rgba(255, 255, 255, 0.2);
                border: none;
                color: white;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.8rem;
            }
            
            .zoom-in:hover, .zoom-out:hover, .zoom-reset:hover {
                background: rgba(0, 188, 212, 0.5);
            }
            
            .modal-info {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .modal-title {
                color: #00bcd4;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0;
            }
            
            .modal-description {
                color: #ddd;
                line-height: 1.6;
                margin: 0;
            }
            
            .modal-actions {
                display: flex;
                gap: 1rem;
                margin-top: auto;
            }
            
            .modal-download, .modal-share {
                flex: 1;
                padding: 1rem;
                border: 1px solid rgba(0, 188, 212, 0.3);
                background: rgba(0, 188, 212, 0.1);
                color: #00bcd4;
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                font-weight: 600;
            }
            
            .modal-download:hover, .modal-share:hover {
                background: rgba(0, 188, 212, 0.2);
                transform: translateY(-2px);
            }
            
            /* Mobile Styles */
            @media (max-width: 768px) {
                .modal-content-wrapper {
                    max-width: 95vw;
                    max-height: 95vh;
                    margin: 1rem;
                }
                
                .modal-header {
                    padding: 1rem;
                    flex-direction: column;
                    gap: 1rem;
                }
                
                .modal-body {
                    grid-template-columns: 1fr;
                    padding: 1rem;
                    gap: 1.5rem;
                    min-height: auto;
                }
                
                .modal-image-container {
                    height: 300px;
                }
                
                .modal-zoom-controls {
                    bottom: 0.5rem;
                    right: 0.5rem;
                }
                
                .modal-actions {
                    flex-direction: column;
                    gap: 0.5rem;
                }
            }
            
            @media (max-width: 480px) {
                .modal-header {
                    padding: 0.5rem;
                }
                
                .modal-body {
                    padding: 0.5rem;
                }
                
                .modal-image-container {
                    height: 250px;
                }
            }
            
            /* Touch active states for mobile */
            .mobile-certs .cert-card.touch-active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            .mobile-certs .cert-card.animate-in {
                animation: slideInUp 0.6s ease forwards;
            }
            
            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    }
}

// Initialize the certificate enhancer
let certificateEnhancer;

document.addEventListener('DOMContentLoaded', function() {
    // Wait for the certificates section to be available
    const checkCertificates = () => {
        const certSection = document.getElementById('certifications');
        const certCards = document.querySelectorAll('.cert-card');
        
        if (certSection && certCards.length > 0) {
            certificateEnhancer = new CertificateEnhancer();
        } else {
            setTimeout(checkCertificates, 100);
        }
    };
    
    checkCertificates();
});

// Prevent memory leaks
window.addEventListener('beforeunload', function() {
    if (certificateEnhancer) {
        // Clean up event listeners if needed
        console.log('Cleaning up certificate enhancer');
    }
});


// Location Manager
const LOCATION_CONFIG = {
    GOOGLE_MAPS_API_KEY: 'AIzaSyBTEtKWn_vsK5eY_9F_qp4vR5zuBbmiGLU',
    MAPS_EMBED_API_KEY: 'AIzaSyDj3vBEBcAhci7NXMYUnEzPZiCcYgEyYhU'
};

// Location Manager
class LocationManager {
    constructor() {
        this.currentLocation = null;
        this.isLocationActive = false;
        this.init();
    }

    init() {
        this.updateISTTime();
        setInterval(() => this.updateISTTime(), 60000);
    }

    updateISTTime() {
        const now = new Date();
        const istTime = new Intl.DateTimeFormat('en-IN', {
            timeZone: 'Asia/Kolkata',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
        }).format(now);
        
        const timeElement = document.getElementById('istTime');
        if (timeElement) {
            timeElement.textContent = istTime;
        }
    }

    async shareLocation() {
        if (!navigator.geolocation) {
            alert('Geolocation not supported');
            return;
        }

        const shareBtn = document.getElementById('shareBtn');
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        
        shareBtn.innerHTML = '<span class="loading-spinner"></span> Getting Location...';
        shareBtn.disabled = true;
        statusText.textContent = 'Getting location...';

        try {
            const position = await this.getCurrentPosition();
            const locationData = await this.getLocationDetails(
                position.coords.latitude, 
                position.coords.longitude
            );
            
            this.currentLocation = locationData;
            this.isLocationActive = true;
            
            this.updateLocationDisplay(locationData);
            this.updateMapLocation(locationData);
            
            statusDot.classList.remove('inactive');
            statusText.textContent = `Location: ${locationData.city}`;
            
            document.getElementById('clearBtn').style.display = 'flex';
            
        } catch (error) {
            console.error('Location error:', error);
            alert('Could not get location: ' + error.message);
        } finally {
            shareBtn.innerHTML = '<i class="fas fa-share-alt"></i> Update Location';
            shareBtn.disabled = false;
        }
    }

    getCurrentPosition() {
        return new Promise((resolve, reject) => {
            const options = {
                enableHighAccuracy: false,
                timeout: 10000,
                maximumAge: 300000
            };

            navigator.geolocation.getCurrentPosition(resolve, reject, options);
        });
    }

    async getLocationDetails(lat, lng) {
        try {
            if (LOCATION_CONFIG.GOOGLE_MAPS_API_KEY === 'YOUR_GOOGLE_MAPS_API_KEY_HERE') {
                return this.getFallbackLocation(lat, lng);
            }

            const response = await fetch(
                `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${LOCATION_CONFIG.GOOGLE_MAPS_API_KEY}&result_type=locality|administrative_area_level_1`
            );
            
            if (!response.ok) throw new Error('Geocoding API error');
            
            const data = await response.json();
            
            if (data.status === 'OK' && data.results.length > 0) {
                const result = data.results[0];
                const components = result.address_components;
                
                return {
                    city: this.extractComponent(components, 'locality') || 'Unknown City',
                    state: this.extractComponent(components, 'administrative_area_level_1') || 'Unknown State',
                    country: this.extractComponent(components, 'country') || 'India',
                    formatted_address: result.formatted_address,
                    coordinates: { lat, lng }
                };
            } else {
                throw new Error('No location data found');
            }
        } catch (error) {
            console.error('Geocoding error:', error);
            return this.getFallbackLocation(lat, lng);
        }
    }

    extractComponent(components, type) {
        const component = components.find(c => c.types.includes(type));
        return component ? component.long_name : null;
    }

    getFallbackLocation(lat, lng) {
        // RVCE coordinates: approximately 12.9237° N, 77.4987° E
        if (lat >= 12.92 && lat <= 12.93 && lng >= 77.49 && lng <= 77.51) {
            return {
                city: 'RVCE Campus',
                state: 'Karnataka',
                country: 'India',
                formatted_address: 'RV College of Engineering, Bangalore, Karnataka, India',
                coordinates: { lat, lng }
            };
        } else if (lat >= 12.8 && lat <= 13.1 && lng >= 77.4 && lng <= 77.8) {
            return {
                city: 'Bangalore',
                state: 'Karnataka',
                country: 'India',
                formatted_address: 'Bangalore, Karnataka, India',
                coordinates: { lat, lng }
            };
        } else if (lat >= 27.0 && lat <= 27.3 && lng >= 77.8 && lng <= 78.2) {
            return {
                city: 'Agra',
                state: 'Uttar Pradesh', 
                country: 'India',
                formatted_address: 'Agra, Uttar Pradesh, India',
                coordinates: { lat, lng }
            };
        } else {
            return {
                city: 'Unknown Location',
                state: 'India',
                country: 'India',
                formatted_address: 'Somewhere in India',
                coordinates: { lat, lng }
            };
        }
    }

    updateLocationDisplay(locationData) {
        const card = document.getElementById('currentLocationCard');
        const details = document.getElementById('currentLocationDetails');
        
        const now = new Date();
        const localTime = new Intl.DateTimeFormat('en-IN', {
            timeZone: 'Asia/Kolkata',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        }).format(now);

        details.innerHTML = `
            <p><i class="fas fa-map"></i> <strong>${locationData.city}, ${locationData.state}</strong></p>
            <p><i class="fas fa-globe"></i> ${locationData.country}</p>
            <p><i class="fas fa-clock"></i> ${localTime}</p>
        `;

        card.style.display = 'block';
    }

    updateMapLocation(locationData) {
        const mapFrame = document.getElementById('locationMap');
        const mapOverlay = document.getElementById('mapOverlay');
        
        // Use the Maps Embed API key for embedding maps
        if (LOCATION_CONFIG.MAPS_EMBED_API_KEY) {
            const query = encodeURIComponent(`${locationData.city}, ${locationData.state}, ${locationData.country}`);
            const embedUrl = `https://www.google.com/maps/embed/v1/place?key=${LOCATION_CONFIG.MAPS_EMBED_API_KEY}&q=${query}&zoom=15&maptype=roadmap`;
            
            mapFrame.src = embedUrl;
        }
        
        mapOverlay.innerHTML = `📍 Current Area: ${locationData.city}`;
    }

    clearLocation() {
        this.currentLocation = null;
        this.isLocationActive = false;
        
        document.getElementById('currentLocationCard').style.display = 'none';
        document.getElementById('clearBtn').style.display = 'none';
        
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        
        statusDot.classList.add('inactive');
        statusText.textContent = 'Location services inactive';
        
        const mapFrame = document.getElementById('locationMap');
        const mapOverlay = document.getElementById('mapOverlay');
        
        // Default to RVCE instead of Bangalore when cleared
        mapFrame.src = `https://www.google.com/maps/embed/v1/place?key=${LOCATION_CONFIG.MAPS_EMBED_API_KEY}&q=RV+College+of+Engineering+Bangalore&zoom=15&maptype=roadmap`;
        mapOverlay.innerHTML = '📍 Study Location: RVCE';
    }
}

// Initialize Location Manager
let locationManager;

// Global functions for buttons
function shareLocation() {
    if (!locationManager) {
        locationManager = new LocationManager();
    }
    locationManager.shareLocation();
}

function clearLocation() {
    if (locationManager) {
        locationManager.clearLocation();
    }
}

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', function() {
    locationManager = new LocationManager();
});
// Enhanced Mobile Stack Cards Manager
// Enhanced Mobile Stack Cards Manager with Smooth Scroll Behavior
class MobileStackManager {
    constructor() {
        this.isMobile = window.innerWidth <= 768;
        this.cards = [];
        this.observer = null;
        this.progressDots = [];
        this.currentActiveIndex = 0;
        this.isInitialized = false;
        this.scrollTimeout = null;
        this.isScrolling = false;
        this.lastScrollTop = 0;
        this.velocityTracker = [];
        this.maxVelocitySamples = 5;
        
        if (this.isMobile) {
            this.init();
        }
        
        this.setupResizeListener();
    }
    
    init() {
        if (this.isInitialized) return;
        
        this.createStackContainer();
        this.setupIntersectionObserver();
        this.setupSmoothScrolling();
        this.setupProgressIndicator();
        this.setupTouchOptimizations();
        this.setupSnapScrolling();
        
        this.isInitialized = true;
    }
    
    createStackContainer() {
        const projectsSection = document.getElementById('projects');
        if (!projectsSection) return;
        
        const showcase = document.getElementById('projectsShowcase');
        if (!showcase) return;
        
        // Create main stack container
        const stackContainer = document.createElement('div');
        stackContainer.className = 'mobile-stack-container';
        stackContainer.id = 'mobileStackContainer';
        
        // Create scrollable viewport
        const viewport = document.createElement('div');
        viewport.className = 'mobile-stack-viewport';
        viewport.id = 'stackViewport';
        
        // Create cards from project data
        projectsData.forEach((project, index) => {
            const card = this.createStackCard(project, index);
            viewport.appendChild(card);
            this.cards.push(card);
        });
        
        stackContainer.appendChild(viewport);
        
        // Insert after showcase (hidden on mobile)
        showcase.style.display = 'none';
        showcase.parentNode.insertBefore(stackContainer, showcase.nextSibling);
    }
    
    createStackCard(project, index) {
        const card = document.createElement('div');
        card.className = 'mobile-stack-card';
        card.setAttribute('data-index', index);
        card.setAttribute('data-project-id', project.id);
        
        // Create gradient background overlay
        const bgOverlay = document.createElement('div');
        bgOverlay.className = 'mobile-stack-bg';
        bgOverlay.style.background = project.background || 'linear-gradient(135deg, rgba(0, 188, 212, 0.15), rgba(0, 188, 212, 0.05))';
        card.appendChild(bgOverlay);
        
        const linksHTML = project.links?.length > 0 ? `
            <div class="mobile-stack-links">
                ${project.links.map(link => `
                    <a href="${link.url}" target="_blank" rel="noopener noreferrer"
                       class="mobile-stack-link ${link.type === 'github' ? 'secondary' : 'primary'}"
                       onclick="event.stopPropagation()">
                        <i class="fas ${link.type === 'github' ? 'fa-code' : 'fa-external-link-alt'}"></i>
                        ${link.text}
                    </a>
                `).join('')}
            </div>
        ` : '';
        
        const content = document.createElement('div');
        content.className = 'mobile-stack-content';
        content.innerHTML = `
            <div class="mobile-stack-header">
                <div class="mobile-stack-icon">
                    <i class="${project.icon}"></i>
                </div>
                <div class="mobile-stack-info">
                    <p class="mobile-stack-subtitle">${project.subtitle}</p>
                    <h3 class="mobile-stack-title">${project.title}</h3>
                </div>
            </div>
            
            <div class="mobile-stack-description">
                ${project.description}
            </div>
            
            <div class="mobile-stack-tech">
                ${project.tech?.map(tech => `<span class="mobile-stack-tech-tag">${tech}</span>`).join('') || ''}
            </div>
            
            ${linksHTML}
        `;
        
        card.appendChild(content);
        
        // Add enhanced touch events
        this.addCardTouchEvents(card, index);
        
        return card;
    }
    
    addCardTouchEvents(card, index) {
        let touchStartTime = 0;
        let touchStartY = 0;
        let touchStartX = 0;
        let isLongPress = false;
        let longPressTimer = null;
        
        card.addEventListener('touchstart', (e) => {
            touchStartTime = Date.now();
            touchStartY = e.touches[0].clientY;
            touchStartX = e.touches[0].clientX;
            isLongPress = false;
            
            // Clear any existing timer
            if (longPressTimer) {
                clearTimeout(longPressTimer);
            }
            
            // Add immediate pressed state
            card.classList.add('touch-active');
            
            // Long press detection
            longPressTimer = setTimeout(() => {
                if (Date.now() - touchStartTime >= 500) {
                    isLongPress = true;
                    this.handleLongPress(card, index, e.touches[0]);
                }
            }, 500);
            
            // Haptic feedback if available
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }
        }, { passive: true });
        
        card.addEventListener('touchmove', (e) => {
            const deltaY = Math.abs(e.touches[0].clientY - touchStartY);
            const deltaX = Math.abs(e.touches[0].clientX - touchStartX);
            
            // If significant movement, cancel long press
            if (deltaY > 15 || deltaX > 15) {
                isLongPress = false;
                if (longPressTimer) {
                    clearTimeout(longPressTimer);
                    longPressTimer = null;
                }
                card.classList.remove('touch-active');
            }
        }, { passive: true });
        
        card.addEventListener('touchend', (e) => {
            // Clear timer and reset state
            if (longPressTimer) {
                clearTimeout(longPressTimer);
                longPressTimer = null;
            }
            
            card.classList.remove('touch-active');
            
            const touchDuration = Date.now() - touchStartTime;
            const deltaY = Math.abs(e.changedTouches[0].clientY - touchStartY);
            const deltaX = Math.abs(e.changedTouches[0].clientX - touchStartX);
            
            // Handle tap (not long press, minimal movement)
            if (touchDuration < 500 && deltaY < 15 && deltaX < 15 && !isLongPress) {
                this.handleCardTap(card, index, e.changedTouches[0]);
            }
        }, { passive: true });
        
        card.addEventListener('touchcancel', () => {
            if (longPressTimer) {
                clearTimeout(longPressTimer);
                longPressTimer = null;
            }
            card.classList.remove('touch-active');
        }, { passive: true });
    }
    
    handleCardTap(card, index, touch) {
        // Create ripple effect
        this.createRippleEffect(card, touch);
        
        // Smooth scroll to center the card
        this.scrollToCard(index);
        
        // Add temporary highlight
        card.classList.add('tap-highlight');
        setTimeout(() => {
            card.classList.remove('tap-highlight');
        }, 1500);
        
        // Update progress indicator
        this.updateProgressIndicator(index);
    }
    
    handleLongPress(card, index, touch) {
        // Enhanced haptic feedback
        if (navigator.vibrate) {
            navigator.vibrate([30, 50, 30]);
        }
        
        // Create special long press ripple
        this.createRippleEffect(card, touch, true);
        
        // Add long press highlight
        card.classList.add('long-press-highlight');
        setTimeout(() => {
            card.classList.remove('long-press-highlight');
        }, 2000);
        
        // Scroll to card and center it perfectly
        this.scrollToCard(index, 'center');
    }
    
    createRippleEffect(card, touch, isLongPress = false) {
        const ripple = document.createElement('div');
        const rect = card.getBoundingClientRect();
        
        const x = touch.clientX - rect.left;
        const y = touch.clientY - rect.top;
        
        const size = Math.max(rect.width, rect.height) * (isLongPress ? 1.5 : 1.2);
        const duration = isLongPress ? 1200 : 800;
        const color = isLongPress ? 'rgba(255, 107, 107, 0.4)' : 'rgba(0, 188, 212, 0.4)';
        
        ripple.className = 'mobile-ripple-effect';
        ripple.style.cssText = `
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, ${color} 0%, transparent 70%);
            transform: scale(0);
            animation: ripple-animation ${duration}ms ease-out;
            left: ${x - size/2}px;
            top: ${y - size/2}px;
            width: ${size}px;
            height: ${size}px;
            pointer-events: none;
            z-index: 10;
        `;
        
        // Ensure ripple animation exists
        this.ensureRippleAnimation();
        
        card.appendChild(ripple);
        
        setTimeout(() => {
            if (ripple.parentNode) {
                ripple.parentNode.removeChild(ripple);
            }
        }, duration);
    }
    
    ensureRippleAnimation() {
        if (!document.querySelector('#mobile-ripple-keyframes')) {
            const style = document.createElement('style');
            style.id = 'mobile-ripple-keyframes';
            style.textContent = `
                @keyframes ripple-animation {
                    0% {
                        transform: scale(0);
                        opacity: 1;
                    }
                    50% {
                        opacity: 0.6;
                    }
                    100% {
                        transform: scale(1);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }
    }
    
    setupIntersectionObserver() {
        const viewport = document.getElementById('stackViewport');
        if (!viewport) return;
        
        const options = {
            root: viewport,
            rootMargin: '-10% 0px -10% 0px',
            threshold: [0.2, 0.5, 0.8]
        };
        
        this.observer = new IntersectionObserver((entries) => {
            let mostVisibleCard = null;
            let maxIntersectionRatio = 0;
            
            entries.forEach(entry => {
                const index = parseInt(entry.target.getAttribute('data-index'));
                
                if (entry.isIntersecting) {
                    // Add in-view class for cards that are visible
                    if (entry.intersectionRatio >= 0.2) {
                        entry.target.classList.add('in-view');
                    }
                    
                    // Find the most visible card
                    if (entry.intersectionRatio > maxIntersectionRatio) {
                        maxIntersectionRatio = entry.intersectionRatio;
                        mostVisibleCard = { element: entry.target, index };
                    }
                } else {
                    entry.target.classList.remove('in-view');
                }
            });
            
            // Update active card to the most visible one
            if (mostVisibleCard && mostVisibleCard.index !== this.currentActiveIndex) {
                this.updateActiveCard(mostVisibleCard.index);
            }
        }, options);
        
        this.cards.forEach(card => {
            this.observer.observe(card);
        });
    }
    
    updateActiveCard(index) {
        // Update current active index
        const previousIndex = this.currentActiveIndex;
        this.currentActiveIndex = index;
        
        // Update visual states
        this.cards.forEach((card, i) => {
            if (i === index) {
                card.classList.add('active-card');
            } else {
                card.classList.remove('active-card');
            }
        });
        
        // Update progress indicator
        this.updateProgressIndicator(index);
        
        // Add stacking effect based on scroll position
        this.updateStackingEffect();
    }
    
    updateStackingEffect() {
        const viewport = document.getElementById('stackViewport');
        if (!viewport) return;
        
        const scrollTop = viewport.scrollTop;
        const viewportHeight = viewport.clientHeight;
        
        this.cards.forEach((card, index) => {
            const cardRect = card.getBoundingClientRect();
            const viewportRect = viewport.getBoundingClientRect();
            
            // Calculate card position relative to viewport
            const cardTop = cardRect.top - viewportRect.top;
            const cardCenter = cardTop + cardRect.height / 2;
            const viewportCenter = viewportHeight / 2;
            
            // Calculate distance from center
            const distanceFromCenter = Math.abs(cardCenter - viewportCenter);
            const maxDistance = viewportHeight / 2;
            const normalizedDistance = Math.min(distanceFromCenter / maxDistance, 1);
            
            // Apply stacking transforms
            const scale = 1 - (normalizedDistance * 0.1); // Slight scale reduction
            const translateY = normalizedDistance * 20; // Slight vertical offset
            const opacity = 1 - (normalizedDistance * 0.3); // Fade effect
            const blur = normalizedDistance * 2; // Subtle blur
            
            // Apply transforms with smooth transitions
            card.style.transform = `scale(${scale}) translateY(${translateY}px)`;
            card.style.opacity = Math.max(opacity, 0.4);
            card.style.filter = `blur(${blur}px)`;
            
            // Z-index based on distance from center
            card.style.zIndex = Math.round(100 - (normalizedDistance * 50));
        });
    }
    
    setupSmoothScrolling() {
        const viewport = document.getElementById('stackViewport');
        if (!viewport) return;
        
        let isUserScrolling = false;
        let scrollEndTimer = null;
        
        viewport.addEventListener('scroll', (e) => {
            // Track velocity for momentum
            this.trackScrollVelocity(viewport.scrollTop);
            
            // Update stacking effect in real-time
            this.updateStackingEffect();
            
            // Set scrolling flag
            isUserScrolling = true;
            
            // Clear previous timer
            if (scrollEndTimer) {
                clearTimeout(scrollEndTimer);
            }
            
            // Set timer for scroll end detection
            scrollEndTimer = setTimeout(() => {
                isUserScrolling = false;
                this.handleScrollEnd();
            }, 150);
            
        }, { passive: true });
        
        // Handle scroll momentum and snapping
        viewport.addEventListener('touchend', () => {
            setTimeout(() => {
                if (!isUserScrolling) {
                    this.handleMomentumScrollEnd();
                }
            }, 100);
        }, { passive: true });
    }
    
    trackScrollVelocity(currentScrollTop) {
        const now = Date.now();
        const velocity = currentScrollTop - this.lastScrollTop;
        
        this.velocityTracker.push({
            velocity,
            timestamp: now
        });
        
        // Keep only recent samples
        if (this.velocityTracker.length > this.maxVelocitySamples) {
            this.velocityTracker.shift();
        }
        
        this.lastScrollTop = currentScrollTop;
    }
    
    handleScrollEnd() {
        // Snap to nearest card if not already centered
        this.snapToNearestCard();
    }
    
    handleMomentumScrollEnd() {
        // Calculate average velocity
        const recentVelocity = this.calculateAverageVelocity();
        
        // If high velocity, let momentum continue
        if (Math.abs(recentVelocity) > 10) {
            setTimeout(() => {
                this.snapToNearestCard();
            }, 300);
        } else {
            this.snapToNearestCard();
        }
    }
    
    calculateAverageVelocity() {
        if (this.velocityTracker.length === 0) return 0;
        
        const totalVelocity = this.velocityTracker.reduce((sum, item) => sum + item.velocity, 0);
        return totalVelocity / this.velocityTracker.length;
    }
    
    snapToNearestCard() {
        const viewport = document.getElementById('stackViewport');
        if (!viewport) return;
        
        const viewportRect = viewport.getBoundingClientRect();
        const viewportCenter = viewportRect.height / 2;
        
        let closestCard = null;
        let minDistance = Infinity;
        
        this.cards.forEach((card, index) => {
            const cardRect = card.getBoundingClientRect();
            const cardCenter = cardRect.top - viewportRect.top + cardRect.height / 2;
            const distance = Math.abs(cardCenter - viewportCenter);
            
            if (distance < minDistance) {
                minDistance = distance;
                closestCard = { card, index };
            }
        });
        
        if (closestCard && minDistance > 20) {
            this.scrollToCard(closestCard.index, 'center', 'smooth');
        }
    }
    
    scrollToCard(index, position = 'center', behavior = 'smooth') {
        const viewport = document.getElementById('stackViewport');
        const card = this.cards[index];
        
        if (!viewport || !card) return;
        
        const cardRect = card.getBoundingClientRect();
        const viewportRect = viewport.getBoundingClientRect();
        
        let scrollTop;
        
        switch (position) {
            case 'top':
                scrollTop = viewport.scrollTop + (cardRect.top - viewportRect.top);
                break;
            case 'center':
            default:
                scrollTop = viewport.scrollTop + (cardRect.top - viewportRect.top) - (viewportRect.height / 2) + (cardRect.height / 2);
                break;
        }
        
        viewport.scrollTo({
            top: scrollTop,
            behavior: behavior
        });
    }
    
    setupSnapScrolling() {
        const viewport = document.getElementById('stackViewport');
        if (!viewport) return;
        
        // CSS scroll snap (modern browsers)
        viewport.style.scrollSnapType = 'y mandatory';
        
        this.cards.forEach(card => {
            card.style.scrollSnapAlign = 'center';
            card.style.scrollSnapStop = 'always';
        });
    }
    
    setupProgressIndicator() {
        const container = document.getElementById('mobileStackContainer');
        if (!container) return;
        
        const progressContainer = document.createElement('div');
        progressContainer.className = 'stack-progress';
        progressContainer.id = 'stackProgress';
        
        this.cards.forEach((_, index) => {
            const dot = document.createElement('div');
            dot.className = `progress-dot ${index === 0 ? 'active' : ''}`;
            dot.addEventListener('click', () => {
                this.scrollToCard(index, 'center', 'smooth');
                this.updateProgressIndicator(index);
            });
            
            progressContainer.appendChild(dot);
            this.progressDots.push(dot);
        });
        
        container.appendChild(progressContainer);
    }
    
    updateProgressIndicator(activeIndex) {
        this.progressDots.forEach((dot, index) => {
            if (index === activeIndex) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        });
    }
    
    setupTouchOptimizations() {
        // Prevent overscroll bounce on iOS
        document.addEventListener('touchmove', (e) => {
            if (e.target.closest('.mobile-stack-viewport')) {
                // Allow scrolling within viewport
                return;
            }
        }, { passive: false });
        
        // Optimize for touch devices
        if ('ontouchstart' in window) {
            document.body.classList.add('touch-device');
        }
        
        // Handle device orientation changes
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                this.updateStackingEffect();
                this.snapToNearestCard();
            }, 300);
        });
    }
    
    setupResizeListener() {
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                const wasMobile = this.isMobile;
                this.isMobile = window.innerWidth <= 768;
                
                if (wasMobile !== this.isMobile) {
                    if (this.isMobile && !this.isInitialized) {
                        this.init();
                    } else if (!this.isMobile && this.isInitialized) {
                        // Show desktop version
                        const showcase = document.getElementById('projectsShowcase');
                        const stackContainer = document.getElementById('mobileStackContainer');
                        
                        if (showcase) showcase.style.display = '';
                        if (stackContainer) stackContainer.style.display = 'none';
                    }
                }
                
                if (this.isMobile && this.isInitialized) {
                    // Recalculate positions after resize
                    setTimeout(() => {
                        this.updateStackingEffect();
                        this.snapToNearestCard();
                    }, 100);
                }
            }, 300);
        });
    }
    
    // Public methods for external control
    nextCard() {
        const nextIndex = Math.min(this.currentActiveIndex + 1, this.cards.length - 1);
        if (nextIndex !== this.currentActiveIndex) {
            this.scrollToCard(nextIndex, 'center', 'smooth');
        }
    }
    
    previousCard() {
        const prevIndex = Math.max(this.currentActiveIndex - 1, 0);
        if (prevIndex !== this.currentActiveIndex) {
            this.scrollToCard(prevIndex, 'center', 'smooth');
        }
    }
    
    goToCard(index) {
        if (index >= 0 && index < this.cards.length) {
            this.scrollToCard(index, 'center', 'smooth');
        }
    }
    
    // Cleanup method
    destroy() {
        if (this.observer) {
            this.observer.disconnect();
        }
        
        this.cards = [];
        this.progressDots = [];
        this.isInitialized = false;
        
        const stackContainer = document.getElementById('mobileStackContainer');
        if (stackContainer) {
            stackContainer.remove();
        }
    }
}

// Global instance
let mobileStackManager;

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Wait for project data to be available
    setTimeout(() => {
        if (typeof projectsData !== 'undefined') {
            mobileStackManager = new MobileStackManager();
        }
    }, 500);
});

// Handle page visibility changes for performance
document.addEventListener('visibilitychange', function() {
    if (mobileStackManager && mobileStackManager.isMobile) {
        if (document.hidden) {
            // Pause animations when tab is not visible
            document.body.style.setProperty('--animation-play-state', 'paused');
        } else {
            // Resume animations
            document.body.style.setProperty('--animation-play-state', 'running');
            // Recalculate positions
            setTimeout(() => {
                mobileStackManager.updateStackingEffect();
            }, 100);
        }
    }
});

// Export for external use
if (typeof module !== 'undefined' && module.exports) {
    module.exports = MobileStackManager;
}

    </script>
</body>
</html>
